

<!DOCTYPE html>
<html>
  <head>
    <title>
	ビッグデータ :: テックまとめ
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2021-12-06T21:39:31 JST">
<meta name="description" content="備忘録用メモサイト">



<title>ビッグデータ :: テックまとめ</title>

<link rel="shortcut icon" href='/images/favicon.png' type="image/x-icon" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css">

<script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>

<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel="stylesheet">



<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/layout.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.main.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.menu.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/notice.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/tabs.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/panel.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/columns.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/children.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/attachments.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/alert.css'>
<link rel="stylesheet" type="text/css" href='/css/docport.css'>

<script src='/js/docport.js'></script>
<script type="text/javascript">
      var baseurl = "https:\/\/tanakakns.github.io\/";
</script>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-42388425-3', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </head>

  <body data-url="/gcp/big-data/"

  class="hidetoc hidenextpage ">

<style type="text/css">
  #debug{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    line-height: 3.5rem;
    margin-bottom: .35rem;
    padding: 0 2rem;
    position: fixed;
    left: 0;      right: 0;     top: 0;
   
    top:0px;
    
    min-height: 150px;

    background-color: white;
    border: 3px solid red;
    z-index: 10000 ;
    word-wrap: all;
    overflow: auto;
  }
</style>
 


    
    
    <header style="">
        <div>
    
    <div class="burger ">
        <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">&#9776;</a>
    </div>
    

    <div>

		
	
			
		
	    	<a class='baselink' href='https://tanakakns.github.io/'>テックまとめ</a>
	  	
	</div>

</div>
    </header>
    

    <article>
      
      <aside class="">
        

		
	
			
		
	    	
	  	
	<div id="close_menu">
  <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">
      <i class="fa fa-lg fa-times"></i>
  </a>
</div>

<ul class="menu">

    <li data-nav-id="https://tanakakns.github.io/design/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/design/">設計</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/design/api-design/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/api-design/">API設計</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/architecture/">アーキテクチャ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/mac/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/mac/">Mac開発環境</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/mac/os-settings/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/mac/os-settings/">OSの設定</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/mac/homebrew/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/mac/homebrew/">Homebrew</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/mac/asdf/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/mac/asdf/">asdf</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/git/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/git/">Git</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/git/initial-setting/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/git/initial-setting/">初期設定</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/go/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/go/">Go言語</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/go/initial-setting/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/initial-setting/">初期設定</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/grammar/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/grammar/">文法</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/naming/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/naming/">命名規則</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/pattern/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/pattern/">パターン</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/database/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/database/">Database</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/database/rdb/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/database/rdb/">RDB</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/aws/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/aws/">AWS</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/well-architected-framework/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/well-architected-framework/">AWS Well-Architected フレームワーク</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/computing/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/computing/">コンピューティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/computing/ec2/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/computing/ec2/">EC2</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/container/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/container/">コンテナ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/storage/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/storage/">ストレージ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/migration/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/migration/">移行と転送</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/networking/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/networking/">ネットワーキングとコンテンツ配信</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/networking/vpc/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/networking/vpc/">VPC</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/dev-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/dev-tools/">開発者用ツール</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/security/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/security/">セキュリティ</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/security/iam/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/security/iam/">IAM</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/database/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/database/">データベース</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/gcp/" class="dd-item parent haschildren
        item_level_$level
        ">

      
      
      
      
          <i class="fas fa-chevron-down ddexp"></i>
        
      
          <a href="/gcp/">GCP</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/gcp-aws/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/gcp-aws/">GCP と AWS の比較</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/monitoring/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/monitoring/">監視</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/">ツール</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/management-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/management-tools/">管理ツール</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/dev-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/dev-tools/">開発ツール</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/access-control-and-security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/access-control-and-security/">アクセス制御とセキュリティ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/">コンピューティングとホスティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/compute-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/compute-engine/">Compute Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/kubernetes-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/kubernetes-engine/">Google Kubernetes Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/app-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/app-engine/">App Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/cloud-functions/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/cloud-functions/">Cloud Functions</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/storage/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/storage/">ストレージ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/">データベース</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/bigquery/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/bigquery/">BigQuery</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/sql/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/sql/">Cloud SQL</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/memorystore/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/memorystore/">Memorystore</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/spanner/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/spanner/">Cloud Spanner</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/">ネットワーキング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/vpc/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/vpc/">VPC</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/load-balancing/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/load-balancing/">Cloud Load Balancing</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/iap/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/iap/">Identity-Aware Proxy</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/interconnect/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/interconnect/">Cloud Interconnect</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/" class="dd-item parent active haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/">ビッグデータ</a>
      
          <i class="fas fa-chevron-down ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/pubsub/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/pubsub/">Cloud Pub/Sub</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/dataflow/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/dataflow/">Dataflow</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/machine-learning/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/machine-learning/">機械学習</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/terraform/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/terraform/">Terraform</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/terraform/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/terraform/basic/">入門</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/docker/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/docker/">Docker</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/docker/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/docker/basic/">入門</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/kubernetes/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/kubernetes/">Kubernetes</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/concept/">概念整理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/architecture/">アーキテクチャ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/kubectl-plugin/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/kubectl-plugin/">kubectl plugin と Krew</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/command/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/command/">コマンド</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/manifest/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/manifest/">マニフェスト</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/application-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/application-management/">アプリケーション管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/cluster-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/cluster-management/">クラスタ管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/security/">セキュリティ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/istio/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/istio/">Istio</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/istio/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/basic/">入門</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/istio/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/concept/">概念整理</a>
      
        
      
    </li>
        </ul>
    </li>
    



</ul>

		
	
			
		
	    	
	  	
	
      </aside>
      

      <section class="page ">
      
	
		
    
    
    <nav id="ariane" aria-label="breadcrumb">
      <ol class="ariane">
        
  
  	
		
  
  	
	<li >
      <a class="text-link" href="https://tanakakns.github.io/">
        
      </a>
    </li>
	
  
    <li class="">
      <a class="text-link" href="/gcp/">
        GCP
      </a>
    </li>
	
  	
  
    <li class="active">
      
        ビッグデータ
      
    </li>

      </ol>
    </nav>
    
    

    
		
        
		
		
		
		
		
		
		

		
			<h1>ビッグデータ</h1>
        

		
										
		

		
	

	
	
	






	<div class="content">
	    <table>
<thead>
<tr>
<th style="text-align:left">サービス</th>
<th style="text-align:left">モデル</th>
<th style="text-align:left">形式</th>
<th style="text-align:left">ユースケース</th>
<th style="text-align:left">対応AWS</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="./pubsub">Cloud Pub/Sub</a></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td></td>
</tr>
</tbody>
</table>
<h2 ref="データ分析パイプライン" >データ分析パイプライン</h2><a class="anchor" id="データ分析パイプライン"></a>
<p>「取り込み」 -&gt; 「処理」 -&gt; 「分析」 -&gt; 「可視化」の順で処理をする。</p>
<ul>
<li>取り込み
<ul>
<li>Cloud Pub/Sub：ストリーミングの場合はこちら</li>
<li>Cloud Storage：ストリーミングではなく一時保存する場合はこちらでも</li>
</ul>
</li>
<li>処理
<ul>
<li>Cloud Dataflow（推奨）： Apache Beam 準拠の ETL 処理、サーバレス</li>
<li>Cloud Dataproc：マネージド Hadoop/Spark、クラスタ管理が必要、既存の Hadoop/Sparkジョブがある場合はこちらでも</li>
</ul>
</li>
<li>分析
<ul>
<li>BigQuery</li>
</ul>
</li>
<li>可視化
<ul>
<li>DataPortal</li>
</ul>
</li>
</ul>
<h2 ref="dataflow-と-dataproc" >Dataflow と Dataproc</h2><a class="anchor" id="dataflow-と-dataproc"></a>
<ul>
<li>Google Cloud Dataflow
<ul>
<li>Dataflowは、サーバーレス、高速、費用効果の高い統合ストリームおよびバッチデータ処理</li>
<li>バッチパイプラインとストリーミングパイプラインの両方に適する</li>
<li>参照：https://cloud.google.com/dataflow</li>
</ul>
</li>
<li>Google Cloud Dataproc
<ul>
<li>オープンソースのデータと分析の処理をクラウドで高速、簡単、かつ安全にする</li>
<li>フルマネージドのApache Spark、Apache Hadoop、Presto、およびその他のOSSクラスターを構築できる</li>
<li>しかし、Dataprocは、バッチおよびストリーム処理には適していない</li>
<li>参照：https://cloud.google.com/dataproc#section-5</li>
<li>Dataproc はストレージとして HDFS / Cloud Storage を選択できる
<ul>
<li>HDFS は 揮発性で、クラスタを削除するとデータも消えることに注意</li>
</ul>
</li>
<li>BigQuery/BigTable/Cloud Storage に対するプログラマブルな <a href="https://cloud.google.com/dataproc/docs/concepts/connectors/bigquery">コネクタ</a> が提供されている</li>
</ul>
</li>
</ul>
<h2 ref="その他ビッグデータ系サービス" >その他ビッグデータ系サービス</h2><a class="anchor" id="その他ビッグデータ系サービス"></a>
<ul>
<li>Cloud Data Loss Prevention
<ul>
<li>GCP内で処理されるデータを監査し、機密データ(電話番号、メールアドレス等の個人情報等）の有無の検知やマスキング処理等が可能なサービス</li>
</ul>
</li>
<li><a href="https://cloud.google.com/dataprep/">Dataprep by Trifacta</a>
<ul>
<li>分析用に異種の大規模なデータセット（構造化データと非構造化データ）の視覚的な探索、データクレンジング、構造化されたデータに変換して準備を行うためのインテリジェントデータサービス</li>
<li>Cloud Storage・BigQuery・デスクトップに保存されたデータを処理して、データを洗練してからCloud Storage・BigQueryにエクスポートできる</li>
<li>Chrome ブラウザでのみ操作可能</li>
<li>Qwiklabs の <a href="https://googlecourses.qwiklabs.com/focuses/11580?parent=catalog">Cloud Dataprep でデータ変換パイプラインを作成する</a> で体験できる。</li>
</ul>
</li>
<li><a href="https://cloud.google.com/datalab">Cloud Datalab</a>
<ul>
<li>データを探索、分析、変換、視覚化し、GCPで機械学習モデルを構築するために作成された強力なインタラクティブツール
<ul>
<li>データクレンジングには適していない</li>
</ul>
</li>
<li>Compute Engineで実行され、複数のクラウドサービスに簡単に接続できるため、データサイエンスのタスクに集中できる</li>
<li>一方でデータのクレンジングには適さない</li>
</ul>
</li>
<li><a href="https://cloud.google.com/composer">Cloud Composer</a>
<ul>
<li>Apache Airflow で構築された、フルマネージドのワークフローオーケストレーションサービス</li>
</ul>
</li>
</ul>
<h2 ref="dataprep-by-trifacta" >Dataprep by Trifacta</h2><a class="anchor" id="dataprep-by-trifacta"></a>
<p>Cloud Dataprep は Chrome ブラウザからのみ利用できる。<br>
Cloud Console から以下の手順で開く。</p>
<ul>
<li>ナビゲーション メニューを開き、[Dataprep] を選択 -&gt; 利用規約に同意 -&gt; いろいろ許可</li>
<li>[Sign in with Google] ウィンドウが表示された場合は GCP のアカウントでログイン -&gt; 規約などに同意</li>
<li>ストレージ バケットのデフォルトの場所を使用するように求められたら [Continue] をクリック</li>
</ul>
<h2 ref="ユースケース" >ユースケース</h2><a class="anchor" id="ユースケース"></a>
<h3 ref="google-cloud-での-iot-分析パイプラインの構築" >Google Cloud での IoT 分析パイプラインの構築</h3><a class="anchor" id="google-cloud-での-iot-分析パイプラインの構築"></a>
<p>要件は以下。</p>
<ul>
<li>Cloud IoT Core を使用して MQTT ベースのデバイスを接続、管理します（シミュレートされたデバイスを使用します）。</li>
<li>Cloud Pub/Sub を使用して Cloud IoT Core から情報のストリームを取り込みます。</li>
<li>Cloud Dataflow を使用して IoT データを処理します。</li>
<li>BigQuery を使用して IoT データを分析します。</li>
</ul>
<p>手順は以下。<br>
まずは、 API を有効にする。</p>
<ul>
<li>ナビゲーション メニュー &gt; [API とサービス] をクリックし、以下の API を有効化する
<ul>
<li>Cloud IoT API</li>
<li>Cloud Pub/Sub API</li>
<li>Dataflow API</li>
</ul>
</li>
</ul>
<p>Cloud Pub/Sub トピックの作成する。</p>
<ul>
<li>ナビゲーション メニュー &gt; [Pub/Sub] &gt; [トピック] へ移動し、 <code>iotlab</code> トピックを作成</li>
<li>作成したトピックの [View permissions] を選択し、[権限] ダイアログで、[ADD MEMBER] をクリックし、[新しいメンバー] に <code>cloud-iot@system.gserviceaccount.com</code> を追加</li>
<li>[Select a role] メニューから新しいメンバーに [Pub/Sub] &gt; [Pub/Sub パブリッシャー] 役割を付与して「保存」</li>
</ul>
<p>Pub/Sub に送信されたメッセージを集約し、BigQuery に保存するため、BigQuery データセットを作成する。</p>
<ul>
<li>ナビゲーション メニュー &gt; [BigQuery] に移動、[完了] をクリック</li>
<li>左側のメニューからプロジェクト ID をクリック -&gt;  [データセットを作成] をクリック -&gt; データセットに「iotlabdataset」という名前を付け、他のすべてのフィールドはそのままにして、[データセットを作成]</li>
<li>データセットをクリックして、コンソールの右側にある [+ テーブルを作成] をクリック</li>
<li>ソース フィールドが [空のテーブル] に設定されていることを確認</li>
<li>[送信先] セクションの [テーブル名] フィールドに、「sensordata」と入力</li>
<li>[スキーマ] セクションで、[+ フィールドを追加] ボタンをクリックして次のフィールドを追加
<ul>
<li>フィールド名として「timestamp」と入力し、フィールドの [型] を [TIMESTAMP] に設定</li>
<li>フィールド名として「device」と入力し、フィールドの [型] を [STRING] に設定</li>
<li>フィールド名として「temperature」と入力し、フィールドの [型] を [FLOAT] に設定</li>
</ul>
</li>
<li>他のデフォルト設定は変更せずに、[テーブルを作成] をクリック</li>
</ul>
<p>Cloud Dataflow パイプラインの作業スペースとして Cloud Storage バケットを作成する。</p>
<ul>
<li>ナビゲーション メニュー &gt; [Storage] に移動</li>
<li>[バケットを作成] をクリックし、[バケットに名前を付ける] には「qwiklabs-gcp-03-b799ccdd7f75-bucket」</li>
<li>[デフォルトのストレージ クラスを選択する] で、まだ選択されていない場合は [Multi-Regional] をクリック</li>
<li>[場所] で最も近いもの（ asia ）を選択し、[作成] をクリック</li>
</ul>
<p>Cloud Dataflow パイプラインを設定する。<br>
ここでは、Pub/Sub からセンサーデータを読み取り、一定の期間の最高気温を計算し、これを BigQuery に書き込むストリーミング データ パイプラインを設定する。</p>
<ul>
<li>ナビゲーション メニュー &gt; [Dataflow] に移動</li>
<li>上部のメニューバーの [テンプレートからジョブを作成] をクリック</li>
<li>ジョブ作成ダイアログの [ジョブ名] に「iotlabflow」と入力</li>
<li>[リージョン エンドポイント] では、リージョンに [us-central1] を選択</li>
<li>[Dataflow テンプレート] には、[Pub/Sub Topic to BigQuery] を選択
<ul>
<li>このテンプレートを選択すると、フォームが更新され、下に新しいフィールドが表示される</li>
</ul>
</li>
<li>[Pub/Sub input topic] には、<code>projects/qwiklabs-gcp-03-b799ccdd7f75/topics/iotlab</code></li>
<li>[BigQuery output table] には、 <code>qwiklabs-gcp-03-b799ccdd7f75:iotlabdataset.sensordata</code></li>
<li>[一時的なロケーション] には、<code>gs://qwiklabs-gcp-03-b799ccdd7f75-bucket/tmp/</code></li>
<li>[オプション パラメータ] をクリックして以下を設定
<ul>
<li>[最大ワーカー数] に「2」と入力</li>
<li>[マシンタイプ] に「n1-standard-1」と入力</li>
</ul>
</li>
<li>[ジョブを実行] をクリック</li>
</ul>
<p>Compute Engine VM を準備する。<br>
事前にプロビジョニング済みの iot-device-simulator という VM インスタンスを使用して、MQTT 接続された IoT デバイスをエミュレートする Python スクリプトのインスタンスを実行する。<br>
また、デバイスをエミュレートする前に、この VM インスタンスを使用して Cloud IoT Core デバイス レジストリにデータを入力する。</p>
<ul>
<li>ナビゲーション メニュー &gt; [Compute Engine] &gt; [VM インスタンス] に移動し、 <code>iot-device-simulator</code> の[SSH] プルダウン矢印をクリックして、[ブラウザ ウィンドウで開く] を選択</li>
<li>以下を実行</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo pip install virtualenv
$ virtualenv -p python3 venv
$ source venv/bin/activate
$ sudo apt-get remove google-cloud-sdk -y
$ curl https://sdk.cloud.google.com | bash
$ exit

$ source venv/bin/activate
$ gcloud init
<span style="color:#75715e"># [1] 982998799090-compute@developer.gserviceaccount.com</span>
<span style="color:#75715e"># [2] Log in with a new account</span>
<span style="color:#75715e"># と出た場合は 2 を選択</span>
https://accounts.google.com/o/oauth2/auth?response_type<span style="color:#f92672">=</span>code&amp;client_id<span style="color:#f92672">=</span>32555940559.apps.googleusercontent.com&amp;r
edirect_uri<span style="color:#f92672">=</span>urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&amp;scope<span style="color:#f92672">=</span>openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.ema
il+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcloud-platform+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fappengine.adm
in+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcompute+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Faccounts.reauth&amp;stat
e<span style="color:#f92672">=</span>AQXJKoqhVh09dIRVOaK1xeMqEeZQ1l&amp;access_type<span style="color:#f92672">=</span>offline&amp;code_challenge_method<span style="color:#f92672">=</span>S256&amp;prompt<span style="color:#f92672">=</span>consent&amp;code_challenge<span style="color:#f92672">=</span>356k-
gg6lJMSpeXG7G6X3Ey8l_YzI_Sdiqkhpc23Bco
</code></pre></div><ul>
<li>表示された URL をクリックすると、新しいブラウザ ウィンドウが開き、確認コードが表示される（ログインを求められた場合はログインする）
<ul>
<li>4/1AY0e-g7q-H3BMTQfsIZ3k79YIs6016W_NSH0wsQQsO-0FNzK8a_PS62Jw5U</li>
</ul>
</li>
<li>[Enter verification code:] プロンプトに対して確認コードを貼り付けて、Enter キーを押す</li>
<li>[Pick cloud project to use] へのレスポンスで、Qwiklabs によって作成されたプロジェクトを選択</li>
<li>次のコマンド（ <code>gcloud components update</code> ）を入力して、SDK のコンポーネントが最新であることを確認</li>
<li>次のコマンド（ <code>gcloud components install beta</code> ）を入力して、ベータ コンポーネントをインストール</li>
<li>次のコマンド（ <code>sudo apt-get update</code> ）を入力して、Debian Linux パッケージ リポジトリに関するシステムの情報を更新</li>
<li>次のコマンド（ <code>sudo apt-get install python-pip openssl git -y</code> ）を入力して、必要な各種ソフトウェア パッケージがインストールされていることを確認</li>
<li>pip を使用して必要な Python コンポーネントを追加（ <code>pip install pyjwt paho-mqtt cryptography</code> ）</li>
<li>次のコマンド（ <code>git clone http://github.com/GoogleCloudPlatform/training-data-analyst</code> ）を入力して、このラボで分析するデータを追加</li>
</ul>
<p>IoT デバイスのレジストリを作成する。<br>
iot-device-simulator VM インスタンスの SSH セッションで、次のコマンドを実行する。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ export PROJECT_ID<span style="color:#f92672">=</span>qwiklabs-gcp-03-b799ccdd7f75
$ export MY_REGION<span style="color:#f92672">=</span>asia-east1
$ gcloud beta iot registries create iotlab-registry <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --project<span style="color:#f92672">=</span>$PROJECT_ID <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --region<span style="color:#f92672">=</span>$MY_REGION <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --event-notification-config<span style="color:#f92672">=</span>topic<span style="color:#f92672">=</span>projects/$PROJECT_ID/topics/iotlab
</code></pre></div><p>暗号鍵ペアを作成する。<br>
IoT デバイスが Cloud IoT Core に安全に接続できるようにするには、暗号鍵ペアを作成する必要がある。<br>
iot-device-simulator VM インスタンスの SSH セッションで、次のコマンドを入力して適切なディレクトリに鍵ペアを作成。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd $HOME/training-data-analyst/quests/iotlab/
$ openssl req -x509 -newkey rsa:2048 -keyout rsa_private.pem <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -nodes -out rsa_cert.pem -subj <span style="color:#e6db74">&#34;/CN=unused&#34;</span>
</code></pre></div><p>この openssl コマンドにより、RSA 暗号鍵ペアが作成され、rsa_private.pem というファイルに書き込まれる。<br>
次にシミュレートされたデバイスをレジストリに追加する。<br>
iot-device-simulator VM インスタンスの SSH セッションで、次のコマンドを入力して temp-sensor-buenos-aires というデバイスを作成する。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gcloud beta iot devices create temp-sensor-buenos-aires <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --project<span style="color:#f92672">=</span>$PROJECT_ID <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --region<span style="color:#f92672">=</span>$MY_REGION <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --registry<span style="color:#f92672">=</span>iotlab-registry <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --public-key path<span style="color:#f92672">=</span>rsa_cert.pem,type<span style="color:#f92672">=</span>rs256
$ gcloud beta iot devices create temp-sensor-istanbul <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --project<span style="color:#f92672">=</span>$PROJECT_ID <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --region<span style="color:#f92672">=</span>$MY_REGION <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --registry<span style="color:#f92672">=</span>iotlab-registry <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --public-key path<span style="color:#f92672">=</span>rsa_cert.pem,type<span style="color:#f92672">=</span>rs256
</code></pre></div><p>シミュレートされたデバイスを実行する。<br>
iot-device-simulator VM インスタンスの SSH セッションで、以下のコマンドを入力して、pki.google.com から CA ルート証明書を適切なディレクトリにダウンロード。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd $HOME/training-data-analyst/quests/iotlab/
$ wget https://pki.google.com/roots.pem
</code></pre></div><p>以下のコマンドを入力して、シミュレートされた 1 つ目のデバイスを実行。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ python cloudiot_mqtt_example_json.py <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --project_id<span style="color:#f92672">=</span>$PROJECT_ID <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --cloud_region<span style="color:#f92672">=</span>$MY_REGION <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --registry_id<span style="color:#f92672">=</span>iotlab-registry <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --device_id<span style="color:#f92672">=</span>temp-sensor-buenos-aires <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --private_key_file<span style="color:#f92672">=</span>rsa_private.pem <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --message_type<span style="color:#f92672">=</span>event <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --algorithm<span style="color:#f92672">=</span>RS256 &gt; buenos-aires-log.txt 2&gt;&amp;<span style="color:#ae81ff">1</span> &amp;
</code></pre></div><p>以下のコマンドを入力して、シミュレートされた 2 つ目のデバイスを実行。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ python cloudiot_mqtt_example_json.py <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --project_id<span style="color:#f92672">=</span>$PROJECT_ID <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --cloud_region<span style="color:#f92672">=</span>$MY_REGION <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --registry_id<span style="color:#f92672">=</span>iotlab-registry <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --device_id<span style="color:#f92672">=</span>temp-sensor-istanbul <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --private_key_file<span style="color:#f92672">=</span>rsa_private.pem <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --message_type<span style="color:#f92672">=</span>event <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>   --algorithm<span style="color:#f92672">=</span>RS256
</code></pre></div><p>テレメトリー データは、シミュレートされたデバイスから Cloud IoT Core を経由して Cloud Pub/Sub トピックに流れる。<br>
データフロー ジョブは Pub/Sub トピックからメッセージを読み取り、その内容を BigQuery テーブルに書き込む。</p>
<p>次に、BigQuery を使用してセンサーデータを分析する。</p>
<ul>
<li>Cloud Console でナビゲーション メニューを開き、[BigQuery] を選択</li>
<li>クエリエディタに次のクエリを入力し、[実行] をクリック</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">timestamp</span>, device, temperature <span style="color:#66d9ef">from</span> iotlabdataset.sensordata
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">timestamp</span> <span style="color:#66d9ef">DESC</span>
<span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">100</span>
</code></pre></div><h3 ref="dataflow-と-bigquery-を使用した-google-cloud-での-etl-処理" >Dataflow と BigQuery を使用した Google Cloud での ETL 処理</h3><a class="anchor" id="dataflow-と-bigquery-を使用した-google-cloud-での-etl-処理"></a>
		</div>






	
	

      </section>

      
      
    </article>
    
    
    <footer>
      

		
	
			
		
	    	
	  	
	
    </footer>
    



  </body>
</html>
