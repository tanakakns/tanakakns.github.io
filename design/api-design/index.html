

<!DOCTYPE html>
<html>
  <head>
    <title>
	API設計 :: テックまとめ
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2022-03-10T22:45:39 JST">
<meta name="description" content="備忘録用メモサイト">



<title>API設計 :: テックまとめ</title>

<link rel="shortcut icon" href='/images/favicon.png' type="image/x-icon" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css">

<script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>

<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel="stylesheet">



<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/layout.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.main.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.menu.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/notice.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/tabs.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/panel.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/columns.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/children.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/attachments.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/alert.css'>
<link rel="stylesheet" type="text/css" href='/css/docport.css'>

<script src='/js/docport.js'></script>
<script type="text/javascript">
      var baseurl = "https:\/\/tanakakns.github.io\/";
</script>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-42388425-3', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </head>

  <body data-url="/design/api-design/"

  class="hidetoc hidenextpage ">

<style type="text/css">
  #debug{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    line-height: 3.5rem;
    margin-bottom: .35rem;
    padding: 0 2rem;
    position: fixed;
    left: 0;      right: 0;     top: 0;
   
    top:0px;
    
    min-height: 150px;

    background-color: white;
    border: 3px solid red;
    z-index: 10000 ;
    word-wrap: all;
    overflow: auto;
  }
</style>
 


    
    
    <header style="">
        <div>
    
    <div class="burger ">
        <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">&#9776;</a>
    </div>
    

    <div>

		
	
			
		
	    	<a class='baselink' href='https://tanakakns.github.io/'>テックまとめ</a>
	  	
	</div>

</div>
    </header>
    

    <article>
      
      <aside class="">
        

		
	
			
		
	    	
	  	
	<div id="close_menu">
  <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">
      <i class="fa fa-lg fa-times"></i>
  </a>
</div>

<ul class="menu">

    <li data-nav-id="https://tanakakns.github.io/design/" class="dd-item parent haschildren
        item_level_$level
        ">

      
      
      
      
          <i class="fas fa-chevron-down ddexp"></i>
        
      
          <a href="/design/">設計</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/design/principle-practice/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/principle-practice/">原理原則・ベストプラクティス</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/api-design/" class="dd-item parent active
        item_level_$level
        ">

      
      
      
      
          <a href="/design/api-design/">API設計</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/microservices/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/microservices/">マイクロサービス</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/clean-architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/clean-architecture/">クリーンアーキテクチャ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/architecture/">アーキテクチャ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/mac/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/mac/">Mac開発環境</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/mac/os-settings/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/mac/os-settings/">OSの設定</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/mac/homebrew/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/mac/homebrew/">Homebrew</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/mac/asdf/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/mac/asdf/">asdf</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/git/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/git/">Git</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/git/initial-setting/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/git/initial-setting/">初期設定</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/java/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/java/">Java</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/java/initial-setting/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/java/initial-setting/">初期設定</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/java/springframework/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/java/springframework/">Spring Framework</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/go/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/go/">Go言語</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/go/initial-setting/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/initial-setting/">初期設定</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/go-modules/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/go-modules/">Go Modules</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/grammar/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/grammar/">文法</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/naming/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/naming/">命名規則</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/pattern/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/pattern/">パターン</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/database/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/database/">Database</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/database/rdb/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/database/rdb/">RDB</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/aws/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/aws/">AWS</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/well-architected-framework/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/well-architected-framework/">AWS Well-Architected フレームワーク</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/computing/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/computing/">コンピューティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/computing/ec2/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/computing/ec2/">EC2</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/container/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/container/">コンテナ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/storage/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/storage/">ストレージ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/database/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/database/">データベース</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/migration/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/migration/">移行と転送</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/networking/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/networking/">ネットワーキングとコンテンツ配信</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/networking/vpc/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/networking/vpc/">VPC</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/dev-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/dev-tools/">開発者用ツール</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/security/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/security/">セキュリティ</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/security/iam/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/security/iam/">IAM</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/aws-cli/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/aws-cli/">AWS CLI</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/gcp/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/gcp/">GCP</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/gcp-aws/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/gcp-aws/">GCP と AWS の比較</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/monitoring/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/monitoring/">監視</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/">ツール</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/management-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/management-tools/">管理ツール</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/dev-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/dev-tools/">開発ツール</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/access-control-and-security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/access-control-and-security/">アクセス制御とセキュリティ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/">コンピューティングとホスティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/compute-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/compute-engine/">Compute Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/kubernetes-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/kubernetes-engine/">Google Kubernetes Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/app-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/app-engine/">App Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/cloud-functions/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/cloud-functions/">Cloud Functions</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/storage/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/storage/">ストレージ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/">データベース</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/bigquery/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/bigquery/">BigQuery</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/sql/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/sql/">Cloud SQL</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/memorystore/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/memorystore/">Memorystore</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/spanner/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/spanner/">Cloud Spanner</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/">ネットワーキング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/vpc/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/vpc/">VPC</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/load-balancing/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/load-balancing/">Cloud Load Balancing</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/iap/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/iap/">Identity-Aware Proxy</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/interconnect/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/interconnect/">Cloud Interconnect</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/">ビッグデータ</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/pubsub/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/pubsub/">Cloud Pub/Sub</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/dataflow/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/dataflow/">Dataflow</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/machine-learning/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/machine-learning/">機械学習</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/terraform/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/terraform/">Terraform</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/terraform/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/terraform/basic/">入門</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/terraform/google-cloud/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/terraform/google-cloud/">Google Cloud</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/docker/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/docker/">Docker</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/docker/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/docker/basic/">入門</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/kubernetes/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/kubernetes/">Kubernetes</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/concept/">概念整理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/architecture/">アーキテクチャ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/kubectl-plugin/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/kubectl-plugin/">kubectl plugin と Krew</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/command/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/command/">コマンド</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/manifest/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/manifest/">マニフェスト</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/application-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/application-management/">アプリケーション管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/cluster-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/cluster-management/">クラスタ管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/security/">セキュリティ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/istio/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/istio/">Istio</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/istio/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/basic/">入門</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/istio/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/concept/">概念整理</a>
      
        
      
    </li>
        </ul>
    </li>
    



</ul>

		
	
			
		
	    	
	  	
	
      </aside>
      

      <section class="page ">
      
	
		
    
    
    <nav id="ariane" aria-label="breadcrumb">
      <ol class="ariane">
        
  
  	
		
  
  	
	<li >
      <a class="text-link" href="https://tanakakns.github.io/">
        
      </a>
    </li>
	
  
    <li class="">
      <a class="text-link" href="/design/">
        設計
      </a>
    </li>
	
  	
  
    <li class="active">
      
        API設計
      
    </li>

      </ol>
    </nav>
    
    

    
		
        
		
		
		
		
		
		
		

		
			<h1>API設計</h1>
        

		
										
		

		
	

	
	
	






	<div class="content">
	    <ol>
<li>REST API</li>
</ol>
<h2 ref="1-rest-api" >1. REST API</h2><a class="anchor" id="1-rest-api"></a>
<p>個人的に REST API の設計をまとめる。</p>
<h3 ref="基本方針" >基本方針</h3><a class="anchor" id="基本方針"></a>
<table>
<thead>
<tr>
<th style="text-align:left">処理の内容</th>
<th style="text-align:left">HTTPメソッド</th>
<th style="text-align:left">URL</th>
<th style="text-align:left">プログラムメソッド</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">リソースデータを全て取得する</td>
<td style="text-align:left">GET</td>
<td style="text-align:left"><code>~/resources</code></td>
<td style="text-align:left"><code>ListResources</code></td>
</tr>
<tr>
<td style="text-align:left">idと一致するリソースを一件取得する</td>
<td style="text-align:left">GET</td>
<td style="text-align:left"><code>~/resources/{id}</code></td>
<td style="text-align:left"><code>GetResource</code></td>
</tr>
<tr>
<td style="text-align:left">リソースを一件登録する</td>
<td style="text-align:left">POST</td>
<td style="text-align:left"><code>~/resources</code></td>
<td style="text-align:left"><code>CreateResource</code></td>
</tr>
<tr>
<td style="text-align:left">idと一致するリソースを一件更新する</td>
<td style="text-align:left">PUT</td>
<td style="text-align:left"><code>~/resources/{id}</code></td>
<td style="text-align:left"><code>UpdateResource</code></td>
</tr>
<tr>
<td style="text-align:left">idと一致するリソースを一件更新する(ただし提供されたフィールドのみ)</td>
<td style="text-align:left">PATCH</td>
<td style="text-align:left"><code>~/resources/{id}</code></td>
<td style="text-align:left"><code>UpdateResource</code></td>
</tr>
<tr>
<td style="text-align:left">idと一致するリソースを一件削除する</td>
<td style="text-align:left">DELETE</td>
<td style="text-align:left"><code>~/resources/{id}</code></td>
<td style="text-align:left"><code>DeleteResource</code></td>
</tr>
<tr>
<td style="text-align:left">リソースの利用可能なメソッドとパラメータを返す</td>
<td style="text-align:left">OPTIONS</td>
<td style="text-align:left"><code>~/resources</code></td>
<td style="text-align:left">-</td>
</tr>
</tbody>
</table>
<ul>
<li>URL は <strong>ケバブケース</strong>
<ul>
<li>NG : <code>/systemOrders</code> 、 <code>/system_orders</code></li>
<li>OK : <code>/system-orders</code></li>
</ul>
</li>
<li>クエリパラメータは <strong>キャメルケース</strong> 、JSON のプロパティにも <strong>キャメルケース</strong>
<ul>
<li>NG : <code>/system-orders/{order_id}</code> 、 <code>/system-orders/{OrderId}</code></li>
<li>OK : <code>/system-orders/{orderId}</code></li>
</ul>
</li>
<li>URL中の <code>resources</code> はリソースを表し、コレクションつまり <strong>複数形の名詞</strong> で表現
<ul>
<li>NG : <code>GET /user</code> 、 <code>GET /User</code></li>
<li>OK : <code>GET /users</code></li>
</ul>
</li>
<li>URL はコレクションで始まり、識別子で終わる
<ul>
<li>NG : <code>GET /shops/:shopId/category/:categoryId/price</code></li>
<li>OK : <code>GET /shops/:shopId/</code> 、 <code>GET /category/:categoryId</code></li>
</ul>
</li>
<li>リソース URL に動詞を使わない
<ul>
<li>NG : <code>POST /updateuser/{userId}</code> 、 <code>GET /getusers</code></li>
<li>OK : <code>PUT /user/{userId}</code></li>
</ul>
</li>
<li>非リソース URL は動詞を使う
<ul>
<li>OK : <code>POST /alerts/245743/resend</code></li>
<li>リソースへの CRUD ではなく、特定のビジネスロジックを実行する場合</li>
</ul>
</li>
<li><code>/health</code> 、 <code>/version</code> 、 <code>/metrics</code> の各 API エンドポイントを実装する
<ul>
<li><code>/health</code> : ヘルスチェック</li>
<li><code>/version</code> : バージョン番号</li>
<li><code>/metrics</code> : 平均応答時間などのさまざまなmetricsを提供</li>
<li><code>/debug</code> と <code>/status</code> もおすすめ</li>
</ul>
</li>
<li>リソース名にテーブル名を使わない
<ul>
<li>NG : <code>product_order</code></li>
<li>OK : <code>product-orders</code></li>
</ul>
</li>
<li>レスポンスにリソースの総数を含める</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">users</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">total</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">34</span> <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#a6e22e">これ</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>ゴールデンルール
<ul>
<li>フラットはネストより良い</li>
<li>単純は複雑より良い</li>
<li>文字列は数字より良い</li>
<li>一貫性はカスタマイズより良い</li>
</ul>
</li>
</ul>
<h3 ref="クエリパラメータの使用" >クエリパラメータの使用</h3><a class="anchor" id="クエリパラメータの使用"></a>
<ul>
<li>検索条件を指定したい場合にしようする
<ul>
<li>SELECT文のWHERE句のように使用する</li>
<li>例）<code>~/dogs?age=3</code>
<ul>
<li>3歳の犬だけを取得する</li>
</ul>
</li>
</ul>
</li>
<li>ある1つのリソースの一部の項目だけを取得したい場合（Partial response）
<ul>
<li>「 <strong>fields</strong> 」にカンマ区切りで指定</li>
<li>例） <code>~/dogs/1234?field=name,color,location</code></li>
</ul>
</li>
<li>あるリソースから件数を指定して取得したい場合（Pagination）
<ul>
<li>「 <strong>limit</strong> 」と「 <strong>offset</strong> 」で指定する</li>
<li>「offset」番目から「limit」件取得する</li>
<li>例）<code>~/dogs?offset=25&amp;limit=50</code></li>
<li>全レコード件数を「metadata」としてレスポンスに含める</li>
</ul>
</li>
</ul>
<h3 ref="リソース操作" >リソース操作</h3><a class="anchor" id="リソース操作"></a>
<p>計算・翻訳・変換など、リソースへのCRUD以外の操作も存在し得る。<br>
その場合は名詞ではな <strong>動詞</strong> を使用する。（（例）~/convert?from=EUR&amp;to=CNY&amp;amount=100）<br>
このAPIはあくまで特殊なケースであることを明記・認識する必要がある。<br>
また、このAPIで取得できるデータはデータベースの値を直接返すのではなく、ロジックで計算して得た結果であるということもまた明記・認識する必要がある。</p>
<h3 ref="コンテンツネゴシエーション" >コンテンツネゴシエーション</h3><a class="anchor" id="コンテンツネゴシエーション"></a>
<p>Restful APIにおいてクライアントからサーバへレスポンスのフォーマットを要求することをコンテンツネゴシエーションという。<br>
クライアントからサーバへコンテンツのフォーマットを要求する方法として以下の３つがある。</p>
<ul>
<li>URLの拡張子
<ul>
<li>例）HTML形式の要求
<ul>
<li><code>https://myserver/myapp/accounts/list.html</code></li>
</ul>
</li>
<li>例）spreadsheet形式の要求
<ul>
<li><code>https://myserver/myapp/accounts/list.xls</code></li>
</ul>
</li>
</ul>
</li>
<li>リクエスト（クエリ）パラメータ
<ul>
<li>例）spreadsheet形式の要求
<ul>
<li><code>https://myserver/myapp/accounts/list?format=xls</code></li>
<li><code>https://myserver/myapp/accounts/list?mediaType=xls</code></li>
</ul>
</li>
</ul>
</li>
<li>Acceptヘッダ
<ul>
<li>例）JSON形式の要求
<ul>
<li><code>Accept: application/json</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>個人的には <strong>Accept ヘッダ</strong> 推奨。<br>
「Accept-Language」「Accept-Encoding」も併せて利用する。</p>
<h3 ref="設計ステップ" >設計ステップ</h3><a class="anchor" id="設計ステップ"></a>
<ol>
<li>対象となるデータを洗い出す</li>
</ol>
<ul>
<li>ER図とか書くんじゃね</li>
</ul>
<ol start="2">
<li>洗い出したデータをリソースに分割する</li>
</ol>
<ul>
<li>ER図の1エンティティを1リソースにしたり、結合したテーブルを1リソースにしたり</li>
</ul>
<ol start="3">
<li>リソースにURLを割りあてる</li>
</ol>
<ul>
<li>リソースは <strong>名詞の複数形</strong> にすること
<ul>
<li>例外的に動詞を使用する場合がある（後述）</li>
</ul>
</li>
<li>URLが右に行くほど自然な階層構造・サブセットになっているか</li>
<li>例）オーナー5678が飼っている犬を表す場合
<ul>
<li><code>~/owners/5678/dogs</code></li>
<li><code>~/resources/{id}/resources/{id}</code> 以上に階層を深くしない</li>
<li>これ以上複雑にしたい場合はクエリパラメータを使用する</li>
</ul>
</li>
</ul>
<ol start="4">
<li>リソースに対してインターフェースを割り当てる</li>
</ol>
<ul>
<li>HTTPメソッド（GET、POST、PUT、DELETE等）の選択</li>
</ul>
<ol start="5">
<li>クライアントから受信するメディアタイプを1つ以上決める</li>
</ol>
<ul>
<li><code>application/json</code> 、 <code>application/xml</code> 、等</li>
</ul>
<ol start="6">
<li>クライアントへ返信するメディアタイプを1つ以上決める</li>
</ol>
<ul>
<li><code>application/json</code> 、 <code>application/xml</code> 、等</li>
</ul>
<ol start="7">
<li>接続性（Connectedness）を高める</li>
</ol>
<ul>
<li>リソースはハイパーメディアリンクによって他のリソースと接続することができる</li>
<li>nクライアントは自らURLを組み立てることは行わず、サーバから送られてくるハイパーメディアリンクを利用する</li>
</ul>
<ol start="8">
<li>正常系を考える（適切なリクエストがあったとき何が起こるか</li>
</ol>
<ul>
<li>ステータスコードの選択</li>
</ul>
<ol start="9">
<li>例外条件を考える（不適切なリクエストがあったとき何が起こるか</li>
</ol>
<ul>
<li>ステータスコードの選択</li>
<li>ステータスコードと例外をマッピングする</li>
</ul>
<p>ステータスコードは概ね下記のものを検討すればよい。</p>
<table>
<thead>
<tr>
<th style="text-align:left">HTTP Status Code</th>
<th style="text-align:left">意味</th>
<th style="text-align:left">発生し得る契機</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">200 OK</td>
<td style="text-align:left">正常に処理が完了</td>
<td style="text-align:left">GET、PUT、DELETEの結果</td>
</tr>
<tr>
<td style="text-align:left">201 Created</td>
<td style="text-align:left">新規リソースが作成された</td>
<td style="text-align:left">POSTの結果</td>
</tr>
<tr>
<td style="text-align:left">204 No Content</td>
<td style="text-align:left">正常に完了したが、特に返却するBodyが無い</td>
<td style="text-align:left">POST、DELETEの結果</td>
</tr>
<tr>
<td style="text-align:left">301 MovedPermanently</td>
<td style="text-align:left">アクセスしたリソースが別のURIに恒久的に移動した</td>
<td style="text-align:left">リソースのURIが変わった時</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">Locationヘッダに移動先のURIを付与する</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">303 See Other</td>
<td style="text-align:left">別のURIにアクセスしてほしい</td>
<td style="text-align:left">アクセスURIを変えてほしい</td>
</tr>
<tr>
<td style="text-align:left">304 Not Modified</td>
<td style="text-align:left">リソースの変更をしなかった</td>
<td style="text-align:left">POST、PUT、DELETEの結果</td>
</tr>
<tr>
<td style="text-align:left">307 Temporary Redirect</td>
<td style="text-align:left">一時的なリダイレクト</td>
<td style="text-align:left">閉塞時等</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">Locationヘッダにリダイレクト先のURIを付与する</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">400 Bad Request</td>
<td style="text-align:left">クライアントからのHTTPリクエストに誤りがありサーバで処理できない</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">401 Unauthorized</td>
<td style="text-align:left">クライアントが認証されていない</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">403 Forbidden</td>
<td style="text-align:left">クライアントの権限不足</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">404 Not Found</td>
<td style="text-align:left">アクセスしたURIが存在しない</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">406 Not Acceptable</td>
<td style="text-align:left">リクエストのAcceptヘッダがサーバで受け入れられない</td>
<td style="text-align:left">コンテンツネゴシエーション失敗</td>
</tr>
<tr>
<td style="text-align:left">415 Unsupported MediaTYpe</td>
<td style="text-align:left">リクエストのContent-Typeヘッダがサーバで受け入れられない</td>
<td style="text-align:left">サーバ側でBodyを解釈できない</td>
</tr>
<tr>
<td style="text-align:left">409 Conflict</td>
<td style="text-align:left">リソースの現状の状態の矛盾している</td>
<td style="text-align:left">更新順序の前後等</td>
</tr>
<tr>
<td style="text-align:left">500 Internal Server Error</td>
<td style="text-align:left">サーバ内でエラーが発生した</td>
<td style="text-align:left">上記以外のサーバエラー</td>
</tr>
</tbody>
</table>
<h3 ref="レスポンスの設計" >レスポンスの設計</h3><a class="anchor" id="レスポンスの設計"></a>
<table>
<thead>
<tr>
<th style="text-align:left">API処理の結果</th>
<th style="text-align:left">レスポンスStatus Code</th>
<th style="text-align:left">レスポンスBody</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">リソースの取得に成功</td>
<td style="text-align:left">200 OK</td>
<td style="text-align:left">取得対象データ</td>
</tr>
<tr>
<td style="text-align:left">リソースの登録に成功</td>
<td style="text-align:left">201 Created</td>
<td style="text-align:left">追加したデータ（Locationヘッダには追加したデータのURL）</td>
</tr>
<tr>
<td style="text-align:left">リソースの更新・削除に成功</td>
<td style="text-align:left">200 OK</td>
<td style="text-align:left">空</td>
</tr>
<tr>
<td style="text-align:left">リソースが存在しない</td>
<td style="text-align:left">404 Not Found</td>
<td style="text-align:left">空</td>
</tr>
<tr>
<td style="text-align:left">リクエストに検証エラー</td>
<td style="text-align:left">400 Bad Request</td>
<td style="text-align:left">エラー情報</td>
</tr>
<tr>
<td style="text-align:left">サーバ側でエラー</td>
<td style="text-align:left">500 Internal Server Error</td>
<td style="text-align:left">エラー情報</td>
</tr>
</tbody>
</table>
<h3 ref="apiの表し方" >APIの表し方</h3><a class="anchor" id="apiの表し方"></a>
<p>そのURLがAPIであることを表す方法は大きく2つある。</p>
<ol>
<li>サブドメインを置く</li>
</ol>
<ul>
<li>例） <code>https://api.example.com/</code></li>
</ul>
<ol start="2">
<li>パスに置く</li>
</ol>
<ul>
<li>例） <code>https://example.com/api/</code></li>
</ul>
<p>サブドメインが多数派らしい（？）。<br>
ちなみにAPIをパスで表現していて、且つ、同じドメインでWebページを公開しているサービスの場合、 <code>https://example.com/web/</code> のようにするサービスがある模様。</p>
<h3 ref="バージョンの表し方" >バージョンの表し方</h3><a class="anchor" id="バージョンの表し方"></a>
<p>APIが仕様変更した際に既存クライアントに影響を与えないようにURLにバージョンを指定するサービスが多い。<br>
その際、以下の観点がある。</p>
<ul>
<li>「v」をつけるorNot
<ul>
<li>例） <code>http://example.com/api/v2/</code></li>
<li>例） <code>http://example.com/api/2/</code></li>
</ul>
</li>
<li>整数or少数
<ul>
<li>例） <code>http://example.com/api/2/</code></li>
<li>例） <code>http://example.com/api/2.0/</code></li>
</ul>
</li>
</ul>
<p>「v有」「整数」（ <code>http://example.com/api/v2/</code> ）が多いようだ。</p>
<h3 ref="その他決める際に困りそうなこと" >その他、決める際に困りそうなこと</h3><a class="anchor" id="その他決める際に困りそうなこと"></a>
<p>答えは出てないがメモっとく。</p>
<ul>
<li>リソースの移動、コピー</li>
<li>複数レコードを選択して更新するＩＦ
<ul>
<li>207 Multi-Statusで返したくなっちゃう</li>
</ul>
</li>
</ul>
<h3 ref="web画面の基本方針" >Web画面の基本方針</h3><a class="anchor" id="web画面の基本方針"></a>
<table>
<thead>
<tr>
<th style="text-align:left">処理の内容</th>
<th style="text-align:left">HTTPメソッド</th>
<th style="text-align:left">URL</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">一覧画面表示</td>
<td style="text-align:left">GET</td>
<td style="text-align:left">~/web/resources</td>
</tr>
<tr>
<td style="text-align:left">詳細画面表示</td>
<td style="text-align:left">GET</td>
<td style="text-align:left">~/web/resources/{id}</td>
</tr>
<tr>
<td style="text-align:left">追加Form表示</td>
<td style="text-align:left">GET</td>
<td style="text-align:left">~/web/resources/new</td>
</tr>
<tr>
<td style="text-align:left">追加アクション</td>
<td style="text-align:left">POST</td>
<td style="text-align:left">~/web/resources/new</td>
</tr>
<tr>
<td style="text-align:left">編集フォーム表示</td>
<td style="text-align:left">GET</td>
<td style="text-align:left">~/web/resources/{id}/edit</td>
</tr>
<tr>
<td style="text-align:left">編集アクション</td>
<td style="text-align:left">POST</td>
<td style="text-align:left">~/web/resources/{id}/edit</td>
</tr>
<tr>
<td style="text-align:left">削除画面表示</td>
<td style="text-align:left">GET</td>
<td style="text-align:left">~/web/resources/{id}/delete</td>
</tr>
<tr>
<td style="text-align:left">削除アクション</td>
<td style="text-align:left">POST</td>
<td style="text-align:left">~/web/resources/{id}/delete</td>
</tr>
</tbody>
</table>
<p>Railsっぽい。</p>
<h3 ref="参考" >参考</h3><a class="anchor" id="参考"></a>
<ul>
<li><a href="https://cloud.google.com/apis/design/">Cloud APIs API 設計ガイド</a></li>
<li><a href="https://qiita.com/baby-degu/items/6f516189445d98ddbb7d">API設計スキルを次のレベルに引き上げるベストプラクティス22選</a></li>
<li><a href="https://restful-api-guidelines-ja.netlify.app/">Zalando RESTful API と イベントスキーマのガイドライン</a>
<ul>
<li>Original: <a href="https://opensource.zalando.com/restful-api-guidelines/">Zalando RESTful API and Event Guidelines</a></li>
</ul>
</li>
</ul>
		</div>






	
	

      </section>

      
      
    </article>
    
    
    <footer>
      

		
	
			
		
	    	
	  	
	
    </footer>
    



  </body>
</html>
