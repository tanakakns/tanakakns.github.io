

<!DOCTYPE html>
<html>
  <head>
    <title>
	原理原則・ベストプラクティス :: テックまとめ
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2022-02-20T16:31:01 JST">
<meta name="description" content="備忘録用メモサイト">



<title>原理原則・ベストプラクティス :: テックまとめ</title>

<link rel="shortcut icon" href='/images/favicon.png' type="image/x-icon" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css">

<script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>

<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel="stylesheet">



<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/layout.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.main.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.menu.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/notice.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/tabs.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/panel.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/columns.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/children.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/attachments.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/alert.css'>
<link rel="stylesheet" type="text/css" href='/css/docport.css'>

<script src='/js/docport.js'></script>
<script type="text/javascript">
      var baseurl = "https:\/\/tanakakns.github.io\/";
</script>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-42388425-3', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </head>

  <body data-url="/design/principle-practice/"

  class="hidetoc hidenextpage ">

<style type="text/css">
  #debug{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    line-height: 3.5rem;
    margin-bottom: .35rem;
    padding: 0 2rem;
    position: fixed;
    left: 0;      right: 0;     top: 0;
   
    top:0px;
    
    min-height: 150px;

    background-color: white;
    border: 3px solid red;
    z-index: 10000 ;
    word-wrap: all;
    overflow: auto;
  }
</style>
 


    
    
    <header style="">
        <div>
    
    <div class="burger ">
        <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">&#9776;</a>
    </div>
    

    <div>

		
	
			
		
	    	<a class='baselink' href='https://tanakakns.github.io/'>テックまとめ</a>
	  	
	</div>

</div>
    </header>
    

    <article>
      
      <aside class="">
        

		
	
			
		
	    	
	  	
	<div id="close_menu">
  <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">
      <i class="fa fa-lg fa-times"></i>
  </a>
</div>

<ul class="menu">

    <li data-nav-id="https://tanakakns.github.io/design/" class="dd-item parent haschildren
        item_level_$level
        ">

      
      
      
      
          <i class="fas fa-chevron-down ddexp"></i>
        
      
          <a href="/design/">設計</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/design/principle-practice/" class="dd-item parent active
        item_level_$level
        ">

      
      
      
      
          <a href="/design/principle-practice/">原理原則・ベストプラクティス</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/api-design/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/api-design/">API設計</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/microservices/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/microservices/">マイクロサービス</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/clean-architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/clean-architecture/">クリーンアーキテクチャ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/architecture/">アーキテクチャ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/mac/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/mac/">Mac開発環境</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/mac/os-settings/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/mac/os-settings/">OSの設定</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/mac/homebrew/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/mac/homebrew/">Homebrew</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/mac/asdf/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/mac/asdf/">asdf</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/git/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/git/">Git</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/git/initial-setting/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/git/initial-setting/">初期設定</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/java/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/java/">Java</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/java/initial-setting/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/java/initial-setting/">初期設定</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/java/springframework/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/java/springframework/">Spring Framework</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/go/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/go/">Go言語</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/go/initial-setting/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/initial-setting/">初期設定</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/go-modules/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/go-modules/">Go Modules</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/grammar/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/grammar/">文法</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/naming/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/naming/">命名規則</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/pattern/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/pattern/">パターン</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/database/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/database/">Database</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/database/rdb/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/database/rdb/">RDB</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/aws/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/aws/">AWS</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/well-architected-framework/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/well-architected-framework/">AWS Well-Architected フレームワーク</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/computing/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/computing/">コンピューティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/computing/ec2/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/computing/ec2/">EC2</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/container/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/container/">コンテナ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/storage/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/storage/">ストレージ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/migration/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/migration/">移行と転送</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/networking/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/networking/">ネットワーキングとコンテンツ配信</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/networking/vpc/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/networking/vpc/">VPC</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/dev-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/dev-tools/">開発者用ツール</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/security/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/security/">セキュリティ</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/security/iam/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/security/iam/">IAM</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/database/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/database/">データベース</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/gcp/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/gcp/">GCP</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/gcp-aws/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/gcp-aws/">GCP と AWS の比較</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/monitoring/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/monitoring/">監視</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/">ツール</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/management-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/management-tools/">管理ツール</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/dev-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/dev-tools/">開発ツール</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/access-control-and-security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/access-control-and-security/">アクセス制御とセキュリティ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/">コンピューティングとホスティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/compute-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/compute-engine/">Compute Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/kubernetes-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/kubernetes-engine/">Google Kubernetes Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/app-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/app-engine/">App Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/cloud-functions/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/cloud-functions/">Cloud Functions</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/storage/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/storage/">ストレージ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/">データベース</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/bigquery/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/bigquery/">BigQuery</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/sql/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/sql/">Cloud SQL</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/memorystore/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/memorystore/">Memorystore</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/spanner/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/spanner/">Cloud Spanner</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/">ネットワーキング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/vpc/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/vpc/">VPC</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/load-balancing/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/load-balancing/">Cloud Load Balancing</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/iap/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/iap/">Identity-Aware Proxy</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/interconnect/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/interconnect/">Cloud Interconnect</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/">ビッグデータ</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/pubsub/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/pubsub/">Cloud Pub/Sub</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/dataflow/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/dataflow/">Dataflow</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/machine-learning/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/machine-learning/">機械学習</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/terraform/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/terraform/">Terraform</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/terraform/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/terraform/basic/">入門</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/docker/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/docker/">Docker</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/docker/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/docker/basic/">入門</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/kubernetes/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/kubernetes/">Kubernetes</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/concept/">概念整理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/architecture/">アーキテクチャ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/kubectl-plugin/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/kubectl-plugin/">kubectl plugin と Krew</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/command/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/command/">コマンド</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/manifest/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/manifest/">マニフェスト</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/application-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/application-management/">アプリケーション管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/cluster-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/cluster-management/">クラスタ管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/security/">セキュリティ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/istio/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/istio/">Istio</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/istio/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/basic/">入門</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/istio/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/concept/">概念整理</a>
      
        
      
    </li>
        </ul>
    </li>
    



</ul>

		
	
			
		
	    	
	  	
	
      </aside>
      

      <section class="page ">
      
	
		
    
    
    <nav id="ariane" aria-label="breadcrumb">
      <ol class="ariane">
        
  
  	
		
  
  	
	<li >
      <a class="text-link" href="https://tanakakns.github.io/">
        
      </a>
    </li>
	
  
    <li class="">
      <a class="text-link" href="/design/">
        設計
      </a>
    </li>
	
  	
  
    <li class="active">
      
        原理原則・ベストプラクティス
      
    </li>

      </ol>
    </nav>
    
    

    
		
        
		
		
		
		
		
		
		

		
			<h1>原理原則・ベストプラクティス</h1>
        

		
										
		

		
	

	
	
	






	<div class="content">
	    <ol>
<li>SOLID から IDEALS へ</li>
<li>The Twelve-Factor App から Beyond the Twelve Factor App へ</li>
</ol>
<h2 ref="1-solid-から-ideals-へ" >1. SOLID から IDEALS へ</h2><a class="anchor" id="1-solid-から-ideals-へ"></a>
<p>オブジェクト指向設計の 5 つの原則 <strong>SOLID</strong></p>
<ul>
<li>Single-responsibility principle: 単一責任の原則</li>
<li>Open/closed principle: 開放閉鎖の原則</li>
<li>Liskov substitution principle: リスコフの置換原則</li>
<li>Interface segregation principle: インターフェース分離の原則</li>
<li>Dependency inversion principle: 依存性逆転の原則</li>
</ul>
<p>SOLID に対してマイクロサービスの特性を考慮した原則 <strong>IDEALS</strong></p>
<ul>
<li>Interface segregation: インターフェイス分離</li>
<li>Deployability (is on you): デプロイ容易性</li>
<li>Event-driven: イベント駆動</li>
<li>Availability over consistency: 整合性よりも可用性</li>
<li>Loose coupling: 疎結合</li>
<li>Single responsibility: 単一責任</li>
</ul>
<h3 ref="interface-segregation-インターフェイス分離" >Interface segregation: インターフェイス分離</h3><a class="anchor" id="interface-segregation-インターフェイス分離"></a>
<p>マイクロサービスの拡張性を維持するため、 <strong>関心事は分離</strong> する。</p>
<ul>
<li><strong>API ゲートウェイパターン</strong> : 共通の入り口
<ul>
<li>メッセージ・プロトコル変換、セキュリティ制御、スロットリングとクォータ、など</li>
</ul>
</li>
<li><strong>BFF パターン</strong> : クライアントに応じた入り口
<ul>
<li>web 用、モバイル用、3rd party 用、など</li>
</ul>
</li>
</ul>
<p><img src="./img/bff-pattern.png" alt="bff-pattern"></p>
<h3 ref="deployability-is-on-you-デプロイ容易性" >Deployability (is on you): デプロイ容易性</h3><a class="anchor" id="deployability-is-on-you-デプロイ容易性"></a>
<p>監視対象・デプロイ回数の <strong>増加に対応</strong> する。</p>
<ul>
<li>変更・管理しやすいインフラ
<ul>
<li>コンテナオーケストレーション、 FaaS 、 IaC 、など</li>
</ul>
</li>
<li><strong>可観測性</strong>
<ul>
<li>トランザクション追跡： Zipkin 、 Jaeger 、 AWS X-Ray 、など</li>
<li>監視： New Relic 、 CloudWatch 、 Datadog 、 Prometheus 、 Grafana 、など</li>
<li>ログ統合： Fluentd 、 Graylog 、 Splunk 、 ELK 、など</li>
</ul>
</li>
<li>サービス間連携
<ul>
<li>サービスメッシュ（ Istio 、 Linderd 、 Consul Connect 、など）</li>
</ul>
</li>
<li>デプロイ・リリース戦略
<ul>
<li>Blue/Green 、 カナリア 、 ローリングアップデート、など</li>
</ul>
</li>
<li>CI/CD・DevOps・GitOps
<ul>
<li>Jenkins 、 GitLabCI/CD 、 Spinnaker 、 Weaveworks 、 Flux 、 AgroCD 、など</li>
</ul>
</li>
</ul>
<h3 ref="event-driven-イベント駆動" >Event-driven: イベント駆動</h3><a class="anchor" id="event-driven-イベント駆動"></a>
<p><strong>スケーラビリティ</strong> と <strong>スループット</strong> を向上させる。<br>
クライアントからのリクエスト処理には同期型と非同期型があり、 <strong>非同期</strong> をうまく使う。</p>
<ul>
<li><strong>コレオグラフィ</strong>
<ul>
<li>マイクロサービス間を非同期連携するパターン</li>
<li>キューや Pub/Sub を利用</li>
</ul>
</li>
</ul>
<p><img src="./img/choreography.png" alt="choreography"></p>
<h3 ref="availability-over-consistency-整合性よりも可用性" >Availability over consistency: 整合性よりも可用性</h3><a class="anchor" id="availability-over-consistency-整合性よりも可用性"></a>
<p>整合性ではなく、 <strong>結果整合性</strong> を確保する。</p>
<ul>
<li>コマンドクエリ責務分離（ <strong>CQRS</strong> ）パターン
<ul>
<li>CRUD を 更新（ CUD ）と参照（ R ）に分割する</li>
<li>更新（ CUD ）を <strong>command</strong> 、参照（ R ）を <strong>query</strong> という</li>
</ul>
</li>
<li>イベントソーシング（ <strong>ES</strong> ）パターン
<ul>
<li><strong>イベント</strong> を記録し、 <strong>イベント</strong> を時系列に実行する</li>
</ul>
</li>
</ul>
<p><img src="./img/cqrs.png" alt="cqrs"></p>
<h3 ref="loose-coupling-疎結合" >Loose coupling: 疎結合</h3><a class="anchor" id="loose-coupling-疎結合"></a>
<p>拡張性を維持するため、マイクロサービス間の依存性を無くす。</p>
<ul>
<li>Pub/Sub
<ul>
<li>非同期にして一度トランザクションを断つ</li>
<li>データの送信者と受信者は違いを知らず、データだけの関係</li>
</ul>
</li>
<li>API ゲートウェイ と BFF
<ul>
<li>関心事の分離</li>
</ul>
</li>
<li>ハイパーメディア
<ul>
<li>テキストや画像などのデータ情報をリンク（ URL ）で表現</li>
</ul>
</li>
<li>マクロサービス毎にデータベース
<ul>
<li>データベースを共有しない</li>
</ul>
</li>
<li>Consumer Driven Contract ( CDC )
<ul>
<li>Consumer/Provider 間の Contract</li>
<li>アーキテクチャレベルの TDD</li>
</ul>
</li>
</ul>
<h3 ref="single-responsibility-単一責任" >Single responsibility: 単一責任</h3><a class="anchor" id="single-responsibility-単一責任"></a>
<p>マイクロサービスの <strong>粒度・サイズは適切に</strong> する。</p>
<ul>
<li>ドメイン駆動設計（ <strong>DDD</strong> ）</li>
</ul>
<h2 ref="2-the-twelve-factor-app-から-beyond-the-twelve-factor-app-へ" >2. The Twelve-Factor App から Beyond the Twelve Factor App へ</h2><a class="anchor" id="2-the-twelve-factor-app-から-beyond-the-twelve-factor-app-へ"></a>
<h3 ref="the-twelve-factor-app" >The Twelve-Factor App</h3><a class="anchor" id="the-twelve-factor-app"></a>
<p>クラウド時代のベストプラクティス <a href="https://12factor.net/ja/">The Twelve-Factor App</a></p>
<ul>
<li>
<ol>
<li>Codebase （ <strong>コードベース</strong> ） : バージョン管理されている1つのコードベースと複数のデプロイ</li>
</ol>
</li>
<li>
<ol start="2">
<li>Dependencies （ <strong>依存関係</strong> ） : 依存関係を明示的に宣言し分離する</li>
</ol>
</li>
<li>
<ol start="3">
<li>Config （ <strong>設定</strong> ） : 設定を環境変数に格納する</li>
</ol>
</li>
<li>
<ol start="4">
<li>Backing services （ <strong>バックエンドサービス</strong> ） : バックエンドサービスをアタッチされたリソースとして扱う</li>
</ol>
</li>
<li>
<ol start="5">
<li>Build, release, run （ <strong>ビルド、リリース、実行</strong> ） : ビルド、リリース、実行の3つのステージを厳密に分離する</li>
</ol>
</li>
<li>
<ol start="6">
<li>Processes （ <strong>プロセス</strong> ） : アプリケーションを1つもしくは複数のステートレスなプロセスとして実行する</li>
</ol>
</li>
<li>
<ol start="7">
<li>Port binding （ <strong>ポートバインディング</strong> ） : ポートバインディングを通してサービスを公開する</li>
</ol>
</li>
<li>
<ol start="8">
<li>Concurrency （ <strong>並行性</strong> ） : プロセスモデルによってスケールアウトする</li>
</ol>
</li>
<li>
<ol start="9">
<li>Disposability （ <strong>廃棄容易性</strong> ） : 高速な起動とグレースフルシャットダウンで堅牢性を最大化する</li>
</ol>
</li>
<li>
<ol start="10">
<li>Dev/prod parity （ <strong>開発/本番一致</strong> ） : 開発、ステージング、本番環境をできるだけ一致させた状態を保つ</li>
</ol>
</li>
<li>
<ol start="11">
<li>Logs （ <strong>ログ</strong> ） : ログをイベントストリームとして扱う</li>
</ol>
</li>
<li>
<ol start="12">
<li>Admin processes （ <strong>管理プロセス</strong> ） : 管理タスクを1回限りのプロセスとして実行する</li>
</ol>
</li>
</ul>
<h3 ref="beyond-the-twelve-factor-app" >Beyond the Twelve Factor App</h3><a class="anchor" id="beyond-the-twelve-factor-app"></a>
<p>クラウドネイティブ時代のベストプラクティス <a href="https://tanzu.vmware.com/content/ebooks/beyond-the-12-factor-app">Beyond the Twelve Factor App</a></p>
<ul>
<li>
<ol>
<li>One codebase, one application （ <strong>1 コードベース、 1 アプリケーション</strong> ）</li>
</ol>
<ul>
<li>1 アプリケーション = 1 コードベース = 1 リポジトリでバージョン管理</li>
<li>環境差分は環境変数で吸収する作りにして 1 コードベースから複数環境（ dev/tst/stg/prd ）でデプロイ可能にする</li>
</ul>
</li>
<li>
<ol start="2">
<li>API first（ <strong>API ファースト</strong> ）</li>
</ol>
<ul>
<li>最初に API を設計して、 API を利用する他チームとの調整を容易にする</li>
<li>Swagger 、 Apiary 、 gRPC などのサポートツールを利用する</li>
<li>CI により結合点を継続的にテストすることで、チームそれぞれが独立のサービスに注力できるようにする</li>
</ul>
</li>
<li>
<ol start="3">
<li>Dependency management （ <strong>依存関係管理</strong> ）</li>
</ol>
</li>
<li>
<ol start="4">
<li>Design, build, release, and run （ <strong>設計、ビルド、リリース、実行</strong> ）</li>
</ol>
<ul>
<li>Design -&gt; Build -&gt; Release -&gt; Run をそれぞれ個別のフェーズで実行する</li>
<li>自動テスト・デプロイを行い、高信頼性を保ちながら CI スピードを最大化する</li>
<li><strong>Design</strong>
<ul>
<li>ライブラリ依存関係を宣言</li>
<li>設計は一度に全て行わず、小さな単位で設計・実装を繰り返す</li>
</ul>
</li>
<li><strong>Build</strong>
<ul>
<li>Design 時に宣言されたライブラリ依存関係を含めて CI を利用してコードを実行形式に変換</li>
<li>1 ビルドで任意の環境（ dev/tst/stg/prd ）でリリース・実行可能な状態にする</li>
</ul>
</li>
<li><strong>Release</strong>
<ul>
<li>ビルド成果物と環境毎の設定と組み合わせ、実行できる形に</li>
<li>一意のリリースバージョンを付与（セマンティックバージョニング）</li>
<li>以前のリリースバージョンにロールバックできること</li>
</ul>
</li>
<li><strong>Run</strong>
<ul>
<li>実行形式・環境設定をコンテナに配置して、プロセスを起動・開始</li>
<li>プロセスが実行されると、マネージドサービスは実行を監視し、ログを集約し、スケールアウト・インに対応する</li>
</ul>
</li>
</ul>
</li>
<li>
<ol start="5">
<li>Configuration, credentials, and code （ <strong>設定、機密情報、コード</strong> ）</li>
</ol>
</li>
<li>
<ol start="6">
<li>Logs （ <strong>ログ</strong> ）</li>
</ol>
</li>
<li>
<ol start="7">
<li>Disposability （ <strong>破棄容易性</strong> ）</li>
</ol>
</li>
<li>
<ol start="8">
<li>Backing services （ <strong>バックエンドサービス</strong> ）</li>
</ol>
</li>
<li>
<ol start="9">
<li>Environment parity （ <strong>環境一致</strong> ）</li>
</ol>
</li>
<li>
<ol start="10">
<li>Administrative processes （ <strong>管理プロセス</strong> ）</li>
</ol>
<ul>
<li>管理プロセス（ cron など）はアプリケーションから分離する
<ul>
<li>アドホックな機能呼出のためのエンドポイント（ REST など）を公開</li>
<li>メインアプリからバッチ関連のコードを切り出し、別のマイクロサービスにする</li>
</ul>
</li>
<li>管理タスクはマネージドサービスを利用
<ul>
<li>自分で実装することは避け、 AWS Lambda などを利用する</li>
</ul>
</li>
</ul>
</li>
<li>
<ol start="11">
<li>Port binding （ <strong>ポートバインディング</strong> ）</li>
</ol>
<ul>
<li>ポートバインディングはやめて、コンテナでサービスを公開する
<ul>
<li>1 つのコンテナ内で複数のアプリケーションを起動しないこと</li>
<li>公開するエンドポイントは、コードを変更せずに外部から設定できるようにすること</li>
</ul>
</li>
</ul>
</li>
<li>
<ol start="12">
<li>Stateless processes （ <strong>ステートレスプロセス</strong> ）</li>
</ol>
</li>
<li>
<ol start="13">
<li>Concurrency （ <strong>平行性</strong> ）</li>
</ol>
</li>
<li>
<ol start="14">
<li>Telemetry （ <strong>テレメトリー</strong> ）</li>
</ol>
<ul>
<li>APM （パフォーマンス）、 KPI （ビジネス指標） 、死活監視が必要
<ul>
<li>リクエスト数、スループット、 TAT など</li>
<li>ビジネス予測・分析のためのイベント・データを収集</li>
<li>プロセス起動数・状態、スケーリング、ヘルスチェック結果など</li>
</ul>
</li>
<li>早い段階で監視戦略を計画し、どの情報を収集・集約し、どの程度の期間・量を保存するのかを考える</li>
</ul>
</li>
<li>
<ol start="15">
<li>Authentication and authorization （ <strong>認証・認可</strong> ）</li>
</ol>
<ul>
<li>クラウドネイティブアプリケーションは <strong>RBAC</strong> （ Role Based Access Control : ロールベースのアクセス制御）でエンドポイントを保護する</li>
<li>どのユーザのリクエストなのか認証し、リソースへの操作を許可する</li>
<li>IP での制限は管理が大変なのでやめる</li>
</ul>
</li>
</ul>
		</div>






	
	

      </section>

      
      
    </article>
    
    
    <footer>
      

		
	
			
		
	    	
	  	
	
    </footer>
    



  </body>
</html>
