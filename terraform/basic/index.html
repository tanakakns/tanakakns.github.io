

<!DOCTYPE html>
<html>
  <head>
    <title>
	入門 :: テックまとめ
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2022-04-09T15:00:25 JST">
<meta name="description" content="備忘録用メモサイト">



<title>入門 :: テックまとめ</title>

<link rel="shortcut icon" href='/images/favicon.png' type="image/x-icon" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css">

<script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>

<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel="stylesheet">



<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/layout.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.main.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.menu.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/notice.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/tabs.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/panel.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/columns.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/children.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/attachments.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/alert.css'>
<link rel="stylesheet" type="text/css" href='/css/docport.css'>

<script src='/js/docport.js'></script>
<script type="text/javascript">
      var baseurl = "https:\/\/tanakakns.github.io\/";
</script>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-42388425-3', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </head>

  <body data-url="/terraform/basic/"

  class="hidetoc hidenextpage ">

<style type="text/css">
  #debug{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    line-height: 3.5rem;
    margin-bottom: .35rem;
    padding: 0 2rem;
    position: fixed;
    left: 0;      right: 0;     top: 0;
   
    top:0px;
    
    min-height: 150px;

    background-color: white;
    border: 3px solid red;
    z-index: 10000 ;
    word-wrap: all;
    overflow: auto;
  }
</style>
 


    
    
    <header style="">
        <div>
    
    <div class="burger ">
        <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">&#9776;</a>
    </div>
    

    <div>

		
	
			
		
	    	<a class='baselink' href='https://tanakakns.github.io/'>テックまとめ</a>
	  	
	</div>

</div>
    </header>
    

    <article>
      
      <aside class="">
        

		
	
			
		
	    	
	  	
	<div id="close_menu">
  <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">
      <i class="fa fa-lg fa-times"></i>
  </a>
</div>

<ul class="menu">

    <li data-nav-id="https://tanakakns.github.io/design/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/design/">設計</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/design/principle-practice/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/principle-practice/">原理原則・ベストプラクティス</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/api-design/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/api-design/">API設計</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/microservices/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/microservices/">マイクロサービス</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/clean-architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/clean-architecture/">クリーンアーキテクチャ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/architecture/">アーキテクチャ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/java/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/java/">Java</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/java/springframework/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/java/springframework/">Spring Framework</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/go/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/go/">Go言語</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/go/naming/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/naming/">命名規則</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/go/pattern/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/go/pattern/">パターン</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/database/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/database/">Database</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/database/rdb/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/database/rdb/">RDB</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/aws/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/aws/">AWS</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/well-architected-framework/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/well-architected-framework/">AWS Well-Architected フレームワーク</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/computing/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/computing/">コンピューティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/computing/ec2/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/computing/ec2/">EC2</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/container/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/container/">コンテナ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/storage/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/storage/">ストレージ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/database/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/database/">データベース</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/database/aurora/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/database/aurora/">Aurora</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/migration/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/migration/">移行と転送</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/networking/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/networking/">ネットワーキングとコンテンツ配信</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/networking/vpc/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/networking/vpc/">VPC</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/dev-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/dev-tools/">開発者用ツール</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/security/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/security/">セキュリティ</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/security/iam/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/security/iam/">IAM</a>
      
        
      
    </li>
        </ul>
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/gcp/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/gcp/">GCP</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/gcp-aws/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/gcp-aws/">GCP と AWS の比較</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/monitoring/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/monitoring/">監視</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/">ツール</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/management-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/management-tools/">管理ツール</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/dev-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/dev-tools/">開発ツール</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/access-control-and-security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/access-control-and-security/">アクセス制御とセキュリティ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/">コンピューティングとホスティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/compute-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/compute-engine/">Compute Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/kubernetes-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/kubernetes-engine/">Google Kubernetes Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/app-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/app-engine/">App Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/cloud-functions/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/cloud-functions/">Cloud Functions</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/storage/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/storage/">ストレージ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/">データベース</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/bigquery/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/bigquery/">BigQuery</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/sql/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/sql/">Cloud SQL</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/memorystore/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/memorystore/">Memorystore</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/spanner/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/spanner/">Cloud Spanner</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/">ネットワーキング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/vpc/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/vpc/">VPC</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/load-balancing/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/load-balancing/">Cloud Load Balancing</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/iap/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/iap/">Identity-Aware Proxy</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/interconnect/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/interconnect/">Cloud Interconnect</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/">ビッグデータ</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/pubsub/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/pubsub/">Cloud Pub/Sub</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/dataflow/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/dataflow/">Dataflow</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/machine-learning/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/machine-learning/">機械学習</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/terraform/" class="dd-item parent haschildren
        item_level_$level
        ">

      
      
      
      
          <i class="fas fa-chevron-down ddexp"></i>
        
      
          <a href="/terraform/">Terraform</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/terraform/basic/" class="dd-item parent active
        item_level_$level
        ">

      
      
      
      
          <a href="/terraform/basic/">入門</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/terraform/google-cloud/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/terraform/google-cloud/">Google Cloud</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/docker/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/docker/">Docker</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/docker/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/docker/basic/">入門</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/kubernetes/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/kubernetes/">Kubernetes</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/concept/">概念整理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/architecture/">アーキテクチャ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/kubectl-plugin/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/kubectl-plugin/">kubectl plugin と Krew</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/command/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/command/">コマンド</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/manifest/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/manifest/">マニフェスト</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/application-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/application-management/">アプリケーション管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/cluster-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/cluster-management/">クラスタ管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/security/">セキュリティ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/istio/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/istio/">Istio</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/istio/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/basic/">入門</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/istio/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/concept/">概念整理</a>
      
        
      
    </li>
        </ul>
    </li>
    



</ul>

		
	
			
		
	    	
	  	
	
      </aside>
      

      <section class="page ">
      
	
		
    
    
    <nav id="ariane" aria-label="breadcrumb">
      <ol class="ariane">
        
  
  	
		
  
  	
	<li >
      <a class="text-link" href="https://tanakakns.github.io/">
        
      </a>
    </li>
	
  
    <li class="">
      <a class="text-link" href="/terraform/">
        Terraform
      </a>
    </li>
	
  	
  
    <li class="active">
      
        入門
      
    </li>

      </ol>
    </nav>
    
    

    
		
        
		
		
		
		
		
		
		

		
			<h1>入門</h1>
        

		
										
		

		
	

	
	
	






	<div class="content">
	    <p>超今更ながら <a href="https://www.terraform.io/">Terraform</a> に入門する。<br>
ここでは AWS を前提とする。</p>
<h1 ref="用語" >用語</h1><a class="anchor" id="用語"></a>
<table>
<thead>
<tr>
<th style="text-align:left">用語</th>
<th style="text-align:left">意味</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Configuration</td>
<td style="text-align:left">インフラ設定のコード。要するに <code>*.tf</code> ファイルに DSL で書く Terraform のコードのこと。</td>
</tr>
<tr>
<td style="text-align:left">HCL</td>
<td style="text-align:left">HashiCorp Configuration Languageの略。<code>*.tf</code> ファイルで使われている DSL のこと。</td>
</tr>
<tr>
<td style="text-align:left">Resource</td>
<td style="text-align:left">Terraform で管理する対象の基本単位。</td>
</tr>
<tr>
<td style="text-align:left">Data Source</td>
<td style="text-align:left">Terraform 管理外だけど、 Terraform 内で参照したい参照専用の外部データ。</td>
</tr>
<tr>
<td style="text-align:left">Provider</td>
<td style="text-align:left">Resource や Data Source などを作成/更新/削除するプラグイン。aws/google/azurermなど。</td>
</tr>
<tr>
<td style="text-align:left">Provisioner</td>
<td style="text-align:left">リソースの作成/削除時に実行するスクリプトなどのプラグイン。local-exec/remote-exec/chefなど</td>
</tr>
<tr>
<td style="text-align:left">State</td>
<td style="text-align:left">Terraform が認識しているリソースの状態。 <code>*.tfstate</code> ファイルのこと。</td>
</tr>
<tr>
<td style="text-align:left">Backend</td>
<td style="text-align:left">State の保存先。local/s3/gcsなど。</td>
</tr>
<tr>
<td style="text-align:left">Module</td>
<td style="text-align:left">Resource や Data Source などを再利用可能なようにまとめた Configuration の単位。</td>
</tr>
</tbody>
</table>
<h1 ref="環境設定" >環境設定</h1><a class="anchor" id="環境設定"></a>
<p>コマンドのバージョン管理ツール <a href="https://asdf-vm.com/#/">asdf</a> で導入する。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ asdf plugin add terraform
</span></span><span style="display:flex;"><span>$ asdf plugin list
</span></span><span style="display:flex;"><span>terraform
</span></span><span style="display:flex;"><span>$ asdf list-all terraform
</span></span><span style="display:flex;"><span>$ asdf install terraform 0.14.6
</span></span><span style="display:flex;"><span>$ asdf global terraform 0.14.6
</span></span><span style="display:flex;"><span>$ asdf current terraform
</span></span><span style="display:flex;"><span>terraform       0.14.6          /Users/tanakakns/.tool-versions
</span></span><span style="display:flex;"><span>$ terraform -v
</span></span><span style="display:flex;"><span>Terraform v0.14.6
</span></span></code></pre></div><h1 ref="基本動作" >基本動作</h1><a class="anchor" id="基本動作"></a>
<ol>
<li><code>.tf</code> ファイルを書く</li>
<li><code>terraform init</code> で初期化
<ul>
<li><code>.terraform</code> ディレクトリが作成され provider のバイナリダウンロードなどの設定が行われる</li>
</ul>
</li>
<li><code>terraform plan</code> で設定に問題無いか確認する</li>
<li><code>terraform apply</code> で実際に適用する</li>
</ol>
<h1 ref="tf-ファイルを書く" ><code>.tf</code> ファイルを書く</h1><a class="anchor" id="tf-ファイルを書く"></a>
<h2 ref="基本設定" >基本設定</h2><a class="anchor" id="基本設定"></a>
<p>変数を管理するファイルを作成する。( <code>variables.tf</code> )</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-terraform:variables.tf" data-lang="terraform:variables.tf"><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;access_key&#34;</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;secret_key&#34;</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;region&#34;</span> {}
</span></span></code></pre></div><p>変数に値を設定するファイルを作成する。（ <code>terraform.tfvars</code> ）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-terraform" data-lang="terraform"><span style="display:flex;"><span><span style="color:#a6e22e">access_key</span> = <span style="color:#e6db74">&#34;access_key&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">secret_key</span> = <span style="color:#e6db74">&#34;secret_key&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">region</span> = <span style="color:#e6db74">&#34;ap-northeast-1&#34;</span>
</span></span></code></pre></div><p>上記はファイルではなく環境変数（ <code>TF_VAR_access_key</code> , <code>TF_VAR_secret_key</code> ）や <code>terraform</code> コマンドオプション（ <code>-var</code> ）からの読み込みも可能。<br>
AWS を Provider 設定するファイルを作成する。（ <code>aws.tf</code> ）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-terraform" data-lang="terraform"><span style="display:flex;"><span><span style="color:#a6e22e">terraform</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">required_version</span> = <span style="color:#e6db74">&#34;&gt;= 0.12.0&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">backend</span> <span style="color:#e6db74">&#34;s3&#34;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">bucket</span> = <span style="color:#e6db74">&#34;your-bucket-name&#34;</span><span style="color:#75715e">  //e.g. terraform-state-bucket
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">key</span>    = <span style="color:#e6db74">&#34;terraform.tfstate&#34;</span><span style="color:#75715e"> //この文字列で tfstate ファイルが作られてS3に置かれる
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">region</span> = <span style="color:#e6db74">&#34;ap-northeast-1&#34;</span><span style="color:#75715e">    //S3のリージョン
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">provider</span> <span style="color:#e6db74">&#34;aws&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">version</span> = <span style="color:#e6db74">&#34;~&gt; 2.0&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">access_key</span> = var.<span style="color:#a6e22e">access_key</span><span style="color:#75715e"> // terraform v0.12 から &#34;${}&#34; をつけなくてよくなった
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">secret_key</span> = var.<span style="color:#a6e22e">secret_key</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">region</span>     = var.<span style="color:#a6e22e">region</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>上記のように <code>terraform.backend</code> を設定することで、State（ <code>*.tfstate</code> ）が S3 に保存される。（ <code>terraform init</code> 実行後）</p>
<h2 ref="tfstate" >tfstate</h2><a class="anchor" id="tfstate"></a>
<p>tfstate は AWS への設定情報を保持し、現在の <code>.tf</code> ファイルとの差分を求めることによって AWS へ設定を反映させる。<br>
先の例では backend （ tfstate の保存場所）に S3 を設定したが、通常の場合はローカル（ <code>.terraform</code> ディレクトリ）に保存される。<br>
tfstate ファイルの保存場所は <code>terraform init</code> コマンド実行時の <code>.tf</code> ファイルの設定に基づいて作成される。<br>
複数人で開発する場合、個々人の tfstate に差分があっては、同じ <code>*.tf</code> ファイルであっても実行に差分が発生するため、 S3 など共有できる場所に tfstate を保存するのがよい。<br>
<code>backend</code> を設定せずに <code>terraform init</code> を実行すると以下のようになる。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ terraform init
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Initializing the backend...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Initializing provider plugins...
</span></span><span style="display:flex;"><span>- Checking <span style="color:#66d9ef">for</span> available provider plugins...
</span></span><span style="display:flex;"><span>- Downloading plugin <span style="color:#66d9ef">for</span> provider <span style="color:#e6db74">&#34;aws&#34;</span> <span style="color:#f92672">(</span>terraform-providers/aws<span style="color:#f92672">)</span> 2.23.0...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Terraform has been successfully initialized!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>You may now begin working with Terraform. Try running <span style="color:#e6db74">&#34;terraform plan&#34;</span> to see
</span></span><span style="display:flex;"><span>any changes that are required <span style="color:#66d9ef">for</span> your infrastructure. All Terraform commands
</span></span><span style="display:flex;"><span>should now work.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>If you ever set or change modules or backend configuration <span style="color:#66d9ef">for</span> Terraform,
</span></span><span style="display:flex;"><span>rerun this command to reinitialize your working directory. If you forget, other
</span></span><span style="display:flex;"><span>commands will detect it and remind you to <span style="color:#66d9ef">do</span> so <span style="color:#66d9ef">if</span> necessary.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ls -la
</span></span><span style="display:flex;"><span>total <span style="color:#ae81ff">24</span>
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">6</span> xxxx  staff  <span style="color:#ae81ff">192</span>  <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">13</span> 16:50 .
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">7</span> xxxx  staff  <span style="color:#ae81ff">224</span>  <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">13</span> 16:43 ..
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">3</span> xxxx  staff   <span style="color:#ae81ff">96</span>  <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">13</span> 16:50 .terraform &lt;- できてる！
</span></span><span style="display:flex;"><span>-rw-r--r--  <span style="color:#ae81ff">1</span> xxxx  staff  <span style="color:#ae81ff">140</span>  <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">13</span> 16:48 aws.tf
</span></span><span style="display:flex;"><span>-rw-r--r--  <span style="color:#ae81ff">1</span> xxxx  staff   <span style="color:#ae81ff">77</span>  <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">13</span> 16:46 terraform.tfvars
</span></span><span style="display:flex;"><span>-rw-r--r--  <span style="color:#ae81ff">1</span> xxxx  staff   <span style="color:#ae81ff">70</span>  <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">13</span> 16:46 variables.tf
</span></span></code></pre></div><h1 ref="環境差分の扱い" >環境差分の扱い</h1><a class="anchor" id="環境差分の扱い"></a>
<p>独自なので参考までに。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ tree
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>├── modules
</span></span><span style="display:flex;"><span>│   ├── variables.tf <span style="color:#75715e"># 変数定義、値の代入は各環境(dev/std/prd)の main.tf で</span>
</span></span><span style="display:flex;"><span>│   ├── aws.tf       <span style="color:#75715e"># provider の設</span>
</span></span><span style="display:flex;"><span>│   ├── ec2.tf       <span style="color:#75715e"># 以降、ここのリソース定義</span>
</span></span><span style="display:flex;"><span>│   └── その他もろもろ.tf
</span></span><span style="display:flex;"><span>└── services
</span></span><span style="display:flex;"><span>    ├── dev
</span></span><span style="display:flex;"><span>    │   ├── main.tf
</span></span><span style="display:flex;"><span>    │   └── terraform.tfvars <span style="color:#75715e"># ローカルで access_key/secret_key だけ設定し、 git 管理はしない</span>
</span></span><span style="display:flex;"><span>    ├── std
</span></span><span style="display:flex;"><span>    │   ├── main.tf
</span></span><span style="display:flex;"><span>    │   └── terraform.tfvars
</span></span><span style="display:flex;"><span>    └── prd
</span></span><span style="display:flex;"><span>        ├── main.tf
</span></span><span style="display:flex;"><span>        └── terraform.tfvars
</span></span></code></pre></div><p>各環境の <code>main.tf</code> は以下のような感じ。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-terraform" data-lang="terraform"><span style="display:flex;"><span><span style="color:#a6e22e">terraform</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">required_version</span> = <span style="color:#e6db74">&#34;&gt;= 0.12&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">backend</span> <span style="color:#e6db74">&#34;s3&#34;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">bucket</span> = <span style="color:#e6db74">&#34;your-bucket-name&#34;</span><span style="color:#75715e"> # backend では変数を使えないので注意
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">key</span>    = <span style="color:#e6db74">&#34;terraform_dev.tfstate&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">region</span> = <span style="color:#e6db74">&#34;ap-northeast-1&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;access_key&#34;</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;secret_key&#34;</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;region&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">default</span> = <span style="color:#e6db74">&#34;ap-northeast-1&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">module</span> <span style="color:#e6db74">&#34;my_module&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">source</span>  = <span style="color:#e6db74">&#34;../../modules&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">access_key</span>  = var.<span style="color:#a6e22e">access_key</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">secret_key</span>  = var.<span style="color:#a6e22e">secret_key</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">region</span>      = var.<span style="color:#a6e22e">region</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  // 以降、 modules の variables.tf 内の変数へ値を代入
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">environment</span> = <span style="color:#e6db74">&#34;dev&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">hoge</span>        = <span style="color:#e6db74">&#34;hoge&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>terraform.tfvars</code> は以下のような感じ。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-terraform" data-lang="terraform"><span style="display:flex;"><span><span style="color:#a6e22e">access_key</span> = <span style="color:#e6db74">&#34;access_key&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">secret_key</span> = <span style="color:#e6db74">&#34;secret_key&#34;</span>
</span></span></code></pre></div><p><code>aws.tf</code> は以下。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-terraform" data-lang="terraform"><span style="display:flex;"><span><span style="color:#66d9ef">provider</span> <span style="color:#e6db74">&#34;aws&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">version</span>    = <span style="color:#e6db74">&#34;~&gt; 2.25&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">access_key</span> = var.<span style="color:#a6e22e">access_key</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">secret_key</span> = var.<span style="color:#a6e22e">secret_key</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">region</span>     = var.<span style="color:#a6e22e">region</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>variable.tf</code> は以下のような感じ。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-terraform" data-lang="terraform"><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;access_key&#34;</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;secret_key&#34;</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;region&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">default</span> = <span style="color:#e6db74">&#34;ap-northeast-1&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;project&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">default</span> = <span style="color:#e6db74">&#34;samplePrj&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">variable</span> <span style="color:#e6db74">&#34;environment&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">default</span> = <span style="color:#e6db74">&#34;dev&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">locals</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">base_tags</span> = {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Project</span>     = var.<span style="color:#a6e22e">project</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Terraform</span>   = <span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Environment</span> = var.<span style="color:#a6e22e">environment</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">base_name</span>       = <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>var.<span style="color:#a6e22e">project</span><span style="color:#e6db74">}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">${</span>var.<span style="color:#a6e22e">environment</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">cluster_name</span>    = <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">local</span>.<span style="color:#a6e22e">base_name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">_cluster&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">default_tags</span>    = merge(<span style="color:#a6e22e">local</span>.<span style="color:#a6e22e">base_tags</span>, map(<span style="color:#e6db74">&#34;kubernetes.io/cluster/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">local</span>.<span style="color:#a6e22e">cluster_name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;shared&#34;</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">cluster_version</span> = <span style="color:#e6db74">&#34;1.13&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>各環境向けに実行するときは各環境のパス（ <code>/services/dev</code> など）をカレントにして実行する。</p>
<h1 ref="参考" >参考</h1><a class="anchor" id="参考"></a>
<ul>
<li><a href="https://registry.terraform.io/">Terraform Module Registry</a></li>
<li><a href="https://github.com/terraform-community-modules">terraform-community-modules</a></li>
<li><a href="https://www.terraform.io/docs/providers/aws/index.html">AWS Provider</a> を参照。</li>
<li><a href="https://qiita.com/minamijoyo/items/1f57c62bed781ab8f4d7">Terraform職人入門: 日々の運用で学んだ知見を淡々とまとめる</a>
<ul>
<li>環境差分の扱いなど参考</li>
<li><code>module</code> と <code>-var-file</code> で環境差分（ <code>dev</code> <code>std</code> <code>prd</code> ）を扱うとよいと思った</li>
</ul>
</li>
</ul>
		</div>






	
	

      </section>

      
      
    </article>
    
    
    <footer>
      

		
	
			
		
	    	
	  	
	
    </footer>
    



  </body>
</html>
