

<!DOCTYPE html>
<html>
  <head>
    <title>
	コマンド :: テックまとめ
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2022-04-11T16:08:08 JST">
<meta name="description" content="備忘録用メモサイト">



<title>コマンド :: テックまとめ</title>

<link rel="shortcut icon" href='/images/favicon.png' type="image/x-icon" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css">

<script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>

<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel="stylesheet">



<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/layout.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.main.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.menu.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/notice.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/tabs.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/panel.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/columns.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/children.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/attachments.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/alert.css'>
<link rel="stylesheet" type="text/css" href='/css/docport.css'>

<script src='/js/docport.js'></script>
<script type="text/javascript">
      var baseurl = "https:\/\/tanakakns.github.io\/";
</script>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-42388425-3', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </head>

  <body data-url="/kubernetes/command/"

  class="hidetoc hidenextpage ">

<style type="text/css">
  #debug{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    line-height: 3.5rem;
    margin-bottom: .35rem;
    padding: 0 2rem;
    position: fixed;
    left: 0;      right: 0;     top: 0;
   
    top:0px;
    
    min-height: 150px;

    background-color: white;
    border: 3px solid red;
    z-index: 10000 ;
    word-wrap: all;
    overflow: auto;
  }
</style>
 


    
    
    <header style="">
        <div>
    
    <div class="burger ">
        <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">&#9776;</a>
    </div>
    

    <div>

		
	
			
		
	    	<a class='baselink' href='https://tanakakns.github.io/'>テックまとめ</a>
	  	
	</div>

</div>
    </header>
    

    <article>
      
      <aside class="">
        

		
	
			
		
	    	
	  	
	<div id="close_menu">
  <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">
      <i class="fa fa-lg fa-times"></i>
  </a>
</div>

<ul class="menu">

    <li data-nav-id="https://tanakakns.github.io/design/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/design/">設計</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/design/principle-practice/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/principle-practice/">原理原則・ベストプラクティス</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/api-design/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/api-design/">API設計</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/microservices/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/microservices/">マイクロサービス</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/clean-architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/clean-architecture/">クリーンアーキテクチャ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/database/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/database/">Database</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/database/rdb/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/database/rdb/">RDB</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/aws/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/aws/">AWS</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/well-architected-framework/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/well-architected-framework/">AWS Well-Architected フレームワーク</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/computing/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/computing/">コンピューティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/computing/ec2/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/computing/ec2/">EC2</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/database/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/database/">データベース</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/database/aurora/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/database/aurora/">Aurora</a>
      
        
      
    </li>
        </ul>
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/gcp/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/gcp/">GCP</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/gcp-aws/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/gcp-aws/">GCP と AWS の比較</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/monitoring/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/monitoring/">監視</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/">ツール</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/management-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/management-tools/">管理ツール</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/dev-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/dev-tools/">開発ツール</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/access-control-and-security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/access-control-and-security/">アクセス制御とセキュリティ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/">コンピューティングとホスティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/compute-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/compute-engine/">Compute Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/kubernetes-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/kubernetes-engine/">Google Kubernetes Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/app-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/app-engine/">App Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/cloud-functions/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/cloud-functions/">Cloud Functions</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/storage/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/storage/">ストレージ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/">データベース</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/bigquery/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/bigquery/">BigQuery</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/sql/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/sql/">Cloud SQL</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/memorystore/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/memorystore/">Memorystore</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/spanner/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/spanner/">Cloud Spanner</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/">ネットワーキング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/vpc/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/vpc/">VPC</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/load-balancing/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/load-balancing/">Cloud Load Balancing</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/iap/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/iap/">Identity-Aware Proxy</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/interconnect/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/interconnect/">Cloud Interconnect</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/">ビッグデータ</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/pubsub/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/pubsub/">Cloud Pub/Sub</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/dataflow/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/dataflow/">Dataflow</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/machine-learning/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/machine-learning/">機械学習</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/kubernetes/" class="dd-item parent haschildren
        item_level_$level
        ">

      
      
      
      
          <i class="fas fa-chevron-down ddexp"></i>
        
      
          <a href="/kubernetes/">Kubernetes</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/concept/">概念整理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/architecture/">アーキテクチャ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/kubectl-plugin/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/kubectl-plugin/">kubectl plugin と Krew</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/command/" class="dd-item parent active
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/command/">コマンド</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/manifest/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/manifest/">マニフェスト</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/application-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/application-management/">アプリケーション管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/cluster-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/cluster-management/">クラスタ管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/security/">セキュリティ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/istio/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/istio/">Istio</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/istio/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/basic/">入門</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/istio/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/concept/">概念整理</a>
      
        
      
    </li>
        </ul>
    </li>
    



</ul>

		
	
			
		
	    	
	  	
	
      </aside>
      

      <section class="page ">
      
	
		
    
    
    <nav id="ariane" aria-label="breadcrumb">
      <ol class="ariane">
        
  
  	
		
  
  	
	<li >
      <a class="text-link" href="https://tanakakns.github.io/">
        
      </a>
    </li>
	
  
    <li class="">
      <a class="text-link" href="/kubernetes/">
        Kubernetes
      </a>
    </li>
	
  	
  
    <li class="active">
      
        コマンド
      
    </li>

      </ol>
    </nav>
    
    

    
		
        
		
		
		
		
		
		
		

		
			<h1>コマンド</h1>
        

		
										
		

		
	

	
	
	






	<div class="content">
	    <p><code>kubectl</code> について。</p>
<p><a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands">kubectl リファレンス</a>
<a href="http://kubernetes.io/ja/docs/reference/kubectl/cheatsheet/">kubectlチートシート</a>
<a href="https://cstoku.dev/posts/2018/k8sdojo-23/">Kubernetes道場 23日目 - kubectlを網羅する</a></p>
<h2 ref="全体像" >全体像</h2><a class="anchor" id="全体像"></a>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>% kubectl --help
</span></span><span style="display:flex;"><span>kubectl controls the Kubernetes cluster manager.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Find more information at: https://kubernetes.io/docs/reference/kubectl/overview/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Basic Commands <span style="color:#f92672">(</span>Beginner<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>  create        ファイルまたは標準入力からリソースを作成する
</span></span><span style="display:flex;"><span>  expose        ReplicaSet、Service、Deployment、Pod に対して新しい Service を作成する
</span></span><span style="display:flex;"><span>  run           イメージをクラスタ上に起動する
</span></span><span style="display:flex;"><span>  set           オブジェクトに特定の features を設定する
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Basic Commands <span style="color:#f92672">(</span>Intermediate<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>  explain       リソースの説明を表示する
</span></span><span style="display:flex;"><span>  get           1つまたは複数のリソースを表示する
</span></span><span style="display:flex;"><span>  edit          サーバ上のリソースを編集する
</span></span><span style="display:flex;"><span>  delete        ファイル名、標準入力、リソース、名前、セレクタをもとにリソースを削除する
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Deploy Commands:
</span></span><span style="display:flex;"><span>  rollout       リソースのロールアウトを管理する
</span></span><span style="display:flex;"><span>  scale         Deployment、 ReplicaSet のサイズを設定する
</span></span><span style="display:flex;"><span>  autoscale     Deployment、 ReplicaSet をオートスケールする
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Cluster Management Commands:
</span></span><span style="display:flex;"><span>  certificate   Modify certificate resources.
</span></span><span style="display:flex;"><span>  cluster-info  クラスターの情報を表示する
</span></span><span style="display:flex;"><span>  top           Display Resource <span style="color:#f92672">(</span>CPU/Memory/Storage<span style="color:#f92672">)</span> usage.
</span></span><span style="display:flex;"><span>  cordon        Mark node as unschedulable
</span></span><span style="display:flex;"><span>  uncordon      Mark node as schedulable
</span></span><span style="display:flex;"><span>  drain         Drain node in preparation <span style="color:#66d9ef">for</span> maintenance
</span></span><span style="display:flex;"><span>  taint         Update the taints on one or more nodes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Troubleshooting and Debugging Commands:
</span></span><span style="display:flex;"><span>  describe      Show details of a specific resource or group of resources
</span></span><span style="display:flex;"><span>  logs          Print the logs <span style="color:#66d9ef">for</span> a container in a pod
</span></span><span style="display:flex;"><span>  attach        Attach to a running container
</span></span><span style="display:flex;"><span>  exec          Execute a command in a container
</span></span><span style="display:flex;"><span>  port-forward  Forward one or more local ports to a pod
</span></span><span style="display:flex;"><span>  proxy         Run a proxy to the Kubernetes API server
</span></span><span style="display:flex;"><span>  cp            Copy files and directories to and from containers.
</span></span><span style="display:flex;"><span>  auth          Inspect authorization
</span></span><span style="display:flex;"><span>  debug         Create debugging sessions <span style="color:#66d9ef">for</span> troubleshooting workloads and nodes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Advanced Commands:
</span></span><span style="display:flex;"><span>  diff          Diff live version against would-be applied version
</span></span><span style="display:flex;"><span>  apply         ファイル名または標準入力でリソースにコンフィグを適用する
</span></span><span style="display:flex;"><span>  patch         Update field<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> of a resource
</span></span><span style="display:flex;"><span>  replace       Replace a resource by filename or stdin
</span></span><span style="display:flex;"><span>  wait          Experimental: Wait <span style="color:#66d9ef">for</span> a specific condition on one or many resources.
</span></span><span style="display:flex;"><span>  kustomize     Build a kustomization target from a directory or a remote url.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Settings Commands:
</span></span><span style="display:flex;"><span>  label         リソースのラベルを更新する
</span></span><span style="display:flex;"><span>  annotate      リソースのアノテーションを更新する
</span></span><span style="display:flex;"><span>  completion    Output shell completion code <span style="color:#66d9ef">for</span> the specified shell <span style="color:#f92672">(</span>bash or zsh<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Other Commands:
</span></span><span style="display:flex;"><span>  api-resources Print the supported API resources on the server
</span></span><span style="display:flex;"><span>  api-versions  Print the supported API versions on the server, in the form of <span style="color:#e6db74">&#34;group/version&#34;</span>
</span></span><span style="display:flex;"><span>  config        kubeconfigを変更する
</span></span><span style="display:flex;"><span>  plugin        Provides utilities <span style="color:#66d9ef">for</span> interacting with plugins.
</span></span><span style="display:flex;"><span>  version       Print the client and server version information
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Usage:
</span></span><span style="display:flex;"><span>  kubectl <span style="color:#f92672">[</span>flags<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>options<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Use <span style="color:#e6db74">&#34;kubectl &lt;command&gt; --help&#34;</span> <span style="color:#66d9ef">for</span> more information about a given command.
</span></span><span style="display:flex;"><span>Use <span style="color:#e6db74">&#34;kubectl options&#34;</span> <span style="color:#66d9ef">for</span> a list of global command-line options <span style="color:#f92672">(</span>applies to all commands<span style="color:#f92672">)</span>.
</span></span></code></pre></div><h2 ref="基本設定" >基本設定</h2><a class="anchor" id="基本設定"></a>
<p><code>kubectl</code> コマンドの設定情報は <code>${HOME}/.kube/config</code> にある。<br>
これを <code>kubeconfig</code> と呼ぶ。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>current-context <span style="color:#75715e"># current-contextを表示する</span>
</span></span><span style="display:flex;"><span>delete-cluster  <span style="color:#75715e"># 指定したコンテキストをkubeconfigから削除する</span>
</span></span><span style="display:flex;"><span>delete-context  <span style="color:#75715e"># 指定したコンテキストをkubeconfigから削除する</span>
</span></span><span style="display:flex;"><span>delete-user     <span style="color:#75715e"># Delete the specified user from the kubeconfig</span>
</span></span><span style="display:flex;"><span>get-clusters    <span style="color:#75715e"># kubeconfigで定義されたクラスターを表示する</span>
</span></span><span style="display:flex;"><span>get-contexts    <span style="color:#75715e"># 1つまたは複数のコンテキストを記述する</span>
</span></span><span style="display:flex;"><span>get-users       <span style="color:#75715e"># Display users defined in the kubeconfig</span>
</span></span><span style="display:flex;"><span>rename-context  <span style="color:#75715e"># Renames a context from the kubeconfig file.</span>
</span></span><span style="display:flex;"><span>set             <span style="color:#75715e"># kubeconfigに個別の変数を設定する</span>
</span></span><span style="display:flex;"><span>set-cluster     <span style="color:#75715e"># kubeconfigにクラスターエントリを設定する</span>
</span></span><span style="display:flex;"><span>set-context     <span style="color:#75715e"># kubeconfigにコンテキストエントリを設定する</span>
</span></span><span style="display:flex;"><span>set-credentials <span style="color:#75715e"># kubeconfigにユーザーエントリを設定する</span>
</span></span><span style="display:flex;"><span>unset           <span style="color:#75715e"># kubeconfigから変数を個別に削除する</span>
</span></span><span style="display:flex;"><span>use-context     <span style="color:#75715e"># kubeconfigにcurrent-contextを設定する</span>
</span></span><span style="display:flex;"><span>view            <span style="color:#75715e"># マージされたkubeconfigの設定または指定されたkubeconfigを表示する</span>
</span></span></code></pre></div><p>kind 環境でやる。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>% kubectl config current-context
</span></span><span style="display:flex;"><span>kind-kind
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>% kubectl cluster-info --context kind-kind
</span></span><span style="display:flex;"><span>Kubernetes control plane is running at https://127.0.0.1:50584
</span></span><span style="display:flex;"><span>KubeDNS is running at https://127.0.0.1:50584/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>To further debug and diagnose cluster problems, use <span style="color:#e6db74">&#39;kubectl cluster-info dump&#39;</span>.
</span></span></code></pre></div><h3 ref="context" >context</h3><a class="anchor" id="context"></a>
<p><code>kubecnfig</code> に含まれる設定は <code>contexts</code> <code>clusters</code> <code>users</code> の 3 種類で、 <code>contexts</code> に <code>cluster</code> （接続先クラスタ情報）と <code>users</code> （ credential 情報）が含まれる。</p>
<p>基本設定でも特に <code>context</code> 設定については以下だけ覚えておく。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>% kubectl config view            <span style="color:#75715e"># kubeconfig の表示</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>% kubectl config current-context <span style="color:#75715e"># 現在の context を取得</span>
</span></span><span style="display:flex;"><span>% kubectl config get-contexts    <span style="color:#75715e"># context の一覧を取得</span>
</span></span><span style="display:flex;"><span>% kubectl config set-context     <span style="color:#75715e"># context をエントリ</span>
</span></span><span style="display:flex;"><span>% kubectl config use-context     <span style="color:#75715e"># 現在の context に設定</span>
</span></span></code></pre></div><p>なお、以降のコマンドで <code>-o yaml --dry-run=client</code> をつけるとマニフェストを確認できるので試してみるといい。</p>
<h2 ref="kubectl-create" ><code>kubectl create</code></h2><a class="anchor" id="kubectl-create"></a>
<p>Pod 以外の大体のリソースは <code>kubectl create</code> で作れる。<a href="https://kubernetes.io/docs/reference/kubectl/conventions/#generators">参考</a></p>
<ul>
<li>clusterrole: Create a ClusterRole.</li>
<li>clusterrolebinding: Create a ClusterRoleBinding for a particular ClusterRole.</li>
<li>configmap: Create a ConfigMap from a local file, directory or literal value.</li>
<li>cronjob: Create a CronJob with the specified name.</li>
<li>deployment: Create a Deployment with the specified name.</li>
<li>job: Create a Job with the specified name.</li>
<li>namespace: Create a Namespace with the specified name.</li>
<li>poddisruptionbudget: Create a PodDisruptionBudget with the specified name.</li>
<li>priorityclass: Create a PriorityClass with the specified name.</li>
<li>quota: Create a Quota with the specified name.</li>
<li>role: Create a Role with single rule.</li>
<li>rolebinding: Create a RoleBinding for a particular Role or ClusterRole.</li>
<li>secret: Create a Secret using specified subcommand.</li>
<li>service: Create a Service using specified subcommand.</li>
<li>serviceaccount: Create a ServiceAccount with the specified name.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e"># Deployment</span>
</span></span><span style="display:flex;"><span>% kubectl create deployment nginx --image<span style="color:#f92672">=</span>nginx --replicas<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Job</span>
</span></span><span style="display:flex;"><span>% kubectl create job busybox --image<span style="color:#f92672">=</span>busybox -- /bin/sh -c <span style="color:#e6db74">&#39;date; echo Hello&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># CronJob</span>
</span></span><span style="display:flex;"><span>% kubectl create cronjob busybox --image<span style="color:#f92672">=</span>busybox --schedule<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*/10 * * * *&#34;</span>  -- /bin/sh -c <span style="color:#e6db74">&#39;date; echo Hello&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ConfigMap</span>
</span></span><span style="display:flex;"><span>% kubectl create configmap my-config --from-literal<span style="color:#f92672">=</span>key1<span style="color:#f92672">=</span>config1 --from-literal<span style="color:#f92672">=</span>key2<span style="color:#f92672">=</span>config2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Secret</span>
</span></span><span style="display:flex;"><span>% kubectl create secret generic my-secret --from-literal<span style="color:#f92672">=</span>key1<span style="color:#f92672">=</span>supersecret --from-literal<span style="color:#f92672">=</span>key2<span style="color:#f92672">=</span>topsecret
</span></span></code></pre></div><p>なお、 Pod だけを作りたい場合は <code>kubectl run</code> を利用する。<br>
また、Service の <code>selector</code> の設定が正しく Pod を捉えているかどうかは <code>kubectl get pods --selector=&quot;app=monolith,secure=enabled&quot;</code> などのコマンドで対象の Pod を取得できるか、で検査できる。</p>
<h2 ref="kubectl-run" ><code>kubectl run</code></h2><a class="anchor" id="kubectl-run"></a>
<p><code>kubectl create</code> がだいたいなんでも作れたのに対し、 <code>kubectl run</code> は Pod のみの実行に特化。<br>
オプションで Service をつけれたりもするが、基本は <code>kubectl create</code> でリソースを作成するのがよい。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e"># Pod</span>
</span></span><span style="display:flex;"><span>% kubectl run nginx --image<span style="color:#f92672">=</span>nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># PodとServiceを同時に作成</span>
</span></span><span style="display:flex;"><span>% kubectl run nginx --image<span style="color:#f92672">=</span>nginx --port<span style="color:#f92672">=</span><span style="color:#ae81ff">80</span> --expose
</span></span></code></pre></div><h2 ref="kubectl-apply" ><code>kubectl apply</code></h2><a class="anchor" id="kubectl-apply"></a>
<p>マニフェストを適用するコマンド。<br>
<code>kubectl create</code> でもマニフェスト適用できるが、 <code>kubectl apply</code> を利用すること。<br>
理由は以下の通り。</p>
<ul>
<li><code>kubectl apply</code> は差分を適用するため、差分が無い場合は何もしない</li>
<li><code>kubectl apply</code> は「前回適用したマニフェスト」「現在クラスタに登録されているリソースの状態」「今回適用するマニフェスト」の 3 種類から差分が算出される</li>
<li><code>kubectl create</code> は「前回適用したマニフェスト」として保存されない</li>
</ul>
<h2 ref="kubectl-label" ><code>kubectl label</code></h2><a class="anchor" id="kubectl-label"></a>
<p>リソースに対して label の追加・更新・削除を行う。</p>
<h2 ref="kubectl-set" ><code>kubectl set</code></h2><a class="anchor" id="kubectl-set"></a>
<p>オブジェクトに特定の features を設定するコマンド。<br>
例えば、以下のコマンドはデプロイメントのイメージのみ変更する。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl set image deployment &lt;demployment-name&gt; &lt;new-image&gt; --record
</span></span></code></pre></div>
		</div>






	
	

      </section>

      
      
    </article>
    
    
    <footer>
      

		
	
			
		
	    	
	  	
	
    </footer>
    



  </body>
</html>
