

<!DOCTYPE html>
<html>
  <head>
    <title>
	kubectl plugin と Krew :: テックまとめ
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2022-05-01T10:56:50 JST">
<meta name="description" content="備忘録用メモサイト">



<title>kubectl plugin と Krew :: テックまとめ</title>

<link rel="shortcut icon" href='/images/favicon.png' type="image/x-icon" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css">

<script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>

<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel="stylesheet">



<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/layout.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.main.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/css/style.menu.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/notice.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/tabs.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/panel.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/columns.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/children.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/attachments.css'>
<link rel="stylesheet" type="text/css" href='https://tanakakns.github.io/sass/shortcodes/alert.css'>
<link rel="stylesheet" type="text/css" href='/css/docport.css'>

<script src='/js/docport.js'></script>
<script type="text/javascript">
      var baseurl = "https:\/\/tanakakns.github.io\/";
</script>




    
  </head>

  <body data-url="/kubernetes/kubectl-plugin/"

  class="hidetoc hidenextpage ">

<style type="text/css">
  #debug{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    line-height: 3.5rem;
    margin-bottom: .35rem;
    padding: 0 2rem;
    position: fixed;
    left: 0;      right: 0;     top: 0;
   
    top:0px;
    
    min-height: 150px;

    background-color: white;
    border: 3px solid red;
    z-index: 10000 ;
    word-wrap: all;
    overflow: auto;
  }
</style>
 


    
    
    <header style="">
        <div>
    
    <div class="burger ">
        <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">&#9776;</a>
    </div>
    

    <div>

		
	
			
		
	    	<a class='baselink' href='https://tanakakns.github.io/'>テックまとめ</a>
	  	
	</div>

</div>
    </header>
    

    <article>
      
      <aside class="">
        

		
	
			
		
	    	
	  	
	<div id="close_menu">
  <a href="javascript:void(0);" style="font-size:15px;" onclick="$('article > aside').toggleClass('responsive')">
      <i class="fa fa-lg fa-times"></i>
  </a>
</div>

<ul class="menu">

    <li data-nav-id="https://tanakakns.github.io/design/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/design/">設計</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/design/principle-practice/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/principle-practice/">原理原則・ベストプラクティス</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/api-design/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/api-design/">API設計</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/microservices/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/microservices/">マイクロサービス</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/design/clean-architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/design/clean-architecture/">クリーンアーキテクチャ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/aws/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/aws/">AWS</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/well-architected-framework/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/well-architected-framework/">AWS Well-Architected フレームワーク</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/aws/database/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/database/">データベース</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/aws/database/aurora/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/aws/database/aurora/">Aurora</a>
      
        
      
    </li>
        </ul>
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/gcp/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/gcp/">GCP</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/gcp-aws/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/gcp-aws/">GCP と AWS の比較</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/monitoring/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/monitoring/">監視</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/">ツール</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/management-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/management-tools/">管理ツール</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/tools/dev-tools/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/tools/dev-tools/">開発ツール</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/access-control-and-security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/access-control-and-security/">アクセス制御とセキュリティ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/">コンピューティングとホスティング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/compute-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/compute-engine/">Compute Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/kubernetes-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/kubernetes-engine/">Google Kubernetes Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/app-engine/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/app-engine/">App Engine</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/computing-hosting/cloud-functions/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/computing-hosting/cloud-functions/">Cloud Functions</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/storage/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/storage/">ストレージ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/">データベース</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/bigquery/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/bigquery/">BigQuery</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/sql/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/sql/">Cloud SQL</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/memorystore/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/memorystore/">Memorystore</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/databases/spanner/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/databases/spanner/">Cloud Spanner</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/">ネットワーキング</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/vpc/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/vpc/">VPC</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/load-balancing/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/load-balancing/">Cloud Load Balancing</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/iap/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/iap/">Identity-Aware Proxy</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/networking/interconnect/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/networking/interconnect/">Cloud Interconnect</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/">ビッグデータ</a>
      <i class="fas fa-chevron-right ddexp"></i>
        
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/pubsub/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/pubsub/">Cloud Pub/Sub</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/big-data/dataflow/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/big-data/dataflow/">Dataflow</a>
      
        
      
    </li>
        </ul>
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/gcp/machine-learning/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/gcp/machine-learning/">機械学習</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/kubernetes/" class="dd-item parent haschildren
        item_level_$level
        ">

      
      
      
      
          <i class="fas fa-chevron-down ddexp"></i>
        
      
          <a href="/kubernetes/">Kubernetes</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/concept/">概念整理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/architecture/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/architecture/">アーキテクチャ</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/kubectl-plugin/" class="dd-item parent active
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/kubectl-plugin/">kubectl plugin と Krew</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/command/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/command/">コマンド</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/manifest/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/manifest/">マニフェスト</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/application-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/application-management/">アプリケーション管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/cluster-management/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/cluster-management/">クラスタ管理</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/kubernetes/security/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/kubernetes/security/">セキュリティ</a>
      
        
      
    </li>
        </ul>
    </li>
    

    <li data-nav-id="https://tanakakns.github.io/istio/" class="dd-item haschildren
        item_level_$level
        ">

      
      
      
      <i class="fas fa-chevron-right ddexp"></i>
        
      
          <a href="/istio/">Istio</a>
      
        <ul>
              

    <li data-nav-id="https://tanakakns.github.io/istio/basic/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/basic/">入門</a>
      
        
      
    </li>
              

    <li data-nav-id="https://tanakakns.github.io/istio/concept/" class="dd-item
        item_level_$level
        ">

      
      
      
      
          <a href="/istio/concept/">概念整理</a>
      
        
      
    </li>
        </ul>
    </li>
    



</ul>

		
	
			
		
	    	
	  	
	
      </aside>
      

      <section class="page ">
      
	
		
    
    
    <nav id="ariane" aria-label="breadcrumb">
      <ol class="ariane">
        
  
  	
		
  
  	
	<li >
      <a class="text-link" href="https://tanakakns.github.io/">
        
      </a>
    </li>
	
  
    <li class="">
      <a class="text-link" href="/kubernetes/">
        Kubernetes
      </a>
    </li>
	
  	
  
    <li class="active">
      
        kubectl plugin と Krew
      
    </li>

      </ol>
    </nav>
    
    

    
		
        
		
		
		
		
		
		
		

		
			<h1>kubectl plugin と Krew</h1>
        

		
										
		

		
	

	
	
	






	<div class="content">
	    <p>kubectlのプラグイン機構 と <strong>Krew</strong> についてまとめる。</p>
<ol>
<li>kubectl plugin</li>
<li>Krew</li>
</ol>
<h2 ref="1-kubectl-plugin" >1. kubectl plugin</h2><a class="anchor" id="1-kubectl-plugin"></a>
<p><strong>kubectl plugin</strong> は kubectl のプラグイン機構で、kubectl に任意のサブコマンドを追加する機能である。<br>
このプラグイン機構は、 <code>PATH</code> の通ったディレクトリに配置された実行ファイルの名前が特定のプレフィックスで開始しているものを呼び出すというもので、kubectl plugin の場合はプレフィックスが <code>kubectl-</code> 。<br>
例えば <code>kubectl-foo</code> という実行ファイルを作成し、 <code>PATH</code> の通ったディレクトリに配置すると、 <code>kubectl foo</code> コマンドとして実行できる。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>% echo <span style="color:#e6db74">&#39;#!/bin/bash\n\necho &#34;foo&#34;&#39;</span> &gt; /usr/local/bin/kubectl-foo
</span></span><span style="display:flex;"><span>% chmod +x /usr/local/bin/kubectl-foo
</span></span><span style="display:flex;"><span>% /usr/local/bin/kubectl-foo
</span></span><span style="display:flex;"><span>foo
</span></span><span style="display:flex;"><span>% kubectl foo
</span></span><span style="display:flex;"><span>foo
</span></span></code></pre></div><p><code>kubectl plugin list</code> コマンドで利用可能なプラグインの一覧を取得できる。</p>
<p>公式：<a href="https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/">Extend kubectl with plugins</a></p>
<h2 ref="2-krew" >2. Krew</h2><a class="anchor" id="2-krew"></a>
<p><a href="https://github.com/kubernetes-sigs/krew">Krew</a> は、 kubectl plugin をパッケージマネージャ Homebrew 風に管理できるツール。</p>
<h3 ref="21-インストール" >2.1. インストール</h3><a class="anchor" id="21-インストール"></a>
<p><a href="https://krew.sigs.k8s.io/docs/user-guide/setup/install/">公式</a> を参照するのが望ましいが、ここでは実際にやった手順を残しておく。</p>
<p><code>git</code> がインストールされていることを確認した後、以下を実行する。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>% <span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>  set -x; cd <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>mktemp -d<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>  OS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>uname | tr <span style="color:#e6db74">&#39;[:upper:]&#39;</span> <span style="color:#e6db74">&#39;[:lower:]&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>  ARCH<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>uname -m | sed -e <span style="color:#e6db74">&#39;s/x86_64/amd64/&#39;</span> -e <span style="color:#e6db74">&#39;s/\(arm\)\(64\)\?.*/\1\2/&#39;</span> -e <span style="color:#e6db74">&#39;s/aarch64$/arm64/&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>  curl -fsSLO <span style="color:#e6db74">&#34;https://github.com/kubernetes-sigs/krew/releases/latest/download/krew.tar.gz&#34;</span> <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>  tar zxvf krew.tar.gz <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>  KREW<span style="color:#f92672">=</span>./krew-<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>OS<span style="color:#e6db74">}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">${</span>ARCH<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;</span>$KREW<span style="color:#e6db74">&#34;</span> install krew
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>（中略）
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> | Use this plugin:
</span></span><span style="display:flex;"><span> |      kubectl krew
</span></span><span style="display:flex;"><span> | Documentation:
</span></span><span style="display:flex;"><span> |      https://krew.sigs.k8s.io/
</span></span><span style="display:flex;"><span> | Caveats:
</span></span><span style="display:flex;"><span> | <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> |  | krew is now installed! To start using kubectl plugins, you need to add
</span></span><span style="display:flex;"><span> |  | krew<span style="color:#960050;background-color:#1e0010">&#39;</span>s installation directory to your PATH:
</span></span><span style="display:flex;"><span> |  | 
</span></span><span style="display:flex;"><span> |  |   * macOS/Linux:
</span></span><span style="display:flex;"><span> |  |     - Add the following to your ~/.bashrc or ~/.zshrc:
</span></span><span style="display:flex;"><span> |  |         export PATH<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>KREW_ROOT<span style="color:#66d9ef">:-</span>$HOME/.krew<span style="color:#e6db74">}</span><span style="color:#e6db74">/bin:</span>$PATH<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span> |  |     - Restart your shell.
</span></span><span style="display:flex;"><span> |  | 
</span></span><span style="display:flex;"><span> |  |   * Windows: Add %USERPROFILE%<span style="color:#ae81ff">\.</span>krew<span style="color:#ae81ff">\b</span>in to your PATH environment variable
</span></span><span style="display:flex;"><span> |  | 
</span></span><span style="display:flex;"><span> |  | To list krew commands and to get help, run:
</span></span><span style="display:flex;"><span> |  |   $ kubectl krew
</span></span><span style="display:flex;"><span> |  | For a full list of available plugins, run:
</span></span><span style="display:flex;"><span> |  |   $ kubectl krew search
</span></span><span style="display:flex;"><span> |  | 
</span></span><span style="display:flex;"><span> |  | You can find documentation at
</span></span><span style="display:flex;"><span> |  |   https://krew.sigs.k8s.io/docs/user-guide/quickstart/.
</span></span><span style="display:flex;"><span> | /
</span></span><span style="display:flex;"><span>/
</span></span></code></pre></div><p><code>$HOME/.krew/bin</code> ディレクトリを作成し、パスを通す。（もちろん、プロファイルに記載する）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>% export PATH<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>KREW_ROOT<span style="color:#66d9ef">:-</span>$HOME/.krew<span style="color:#e6db74">}</span><span style="color:#e6db74">/bin:</span>$PATH<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><p><code>kubectl krew</code> コマンドを実行し、 Usage が表示されてば完了。<br>
また、 Krew 自身も kubectl plugin なので、 <code>kubectl plugin list</code> で表示される。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>% kubectl plugin list
</span></span><span style="display:flex;"><span>The following compatible plugins are available:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/Users/pepese/.krew/bin/kubectl-krew
</span></span></code></pre></div><p>アンインストールしたい場合は、 <code>rm -rf -- ~/.krew</code> 実行と、環境変数を設定したプロファイルを削除すればいい。</p>
<h3 ref="22-クイックスタート" >2.2. クイックスタート</h3><a class="anchor" id="22-クイックスタート"></a>
<p>先に同じく <a href="https://krew.sigs.k8s.io/docs/user-guide/quickstart/">公式</a> を参照するのが、望ましいがここでは実際にやった手順を残しておく。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e"># プラグインリストの更新</span>
</span></span><span style="display:flex;"><span>% kubectl krew update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># プラグインの検索</span>
</span></span><span style="display:flex;"><span>% kubectl krew search
</span></span><span style="display:flex;"><span>（いっぱい出る）
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># プラグイン検索（キーワード指定）</span>
</span></span><span style="display:flex;"><span>% kubectl krew search ctx
</span></span><span style="display:flex;"><span>NAME           DESCRIPTION                                      INSTALLED
</span></span><span style="display:flex;"><span>access-matrix  Show an RBAC access matrix <span style="color:#66d9ef">for</span> server resources  no
</span></span><span style="display:flex;"><span>allctx         Run commands on contexts in your kubeconfig      no
</span></span><span style="display:flex;"><span>ctx            Switch between contexts in your kubeconfig       no
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># プラグインのインストール</span>
</span></span><span style="display:flex;"><span>% kubectl krew install ctx
</span></span><span style="display:flex;"><span>Updated the local copy of plugin index.
</span></span><span style="display:flex;"><span>Installing plugin: ctx
</span></span><span style="display:flex;"><span>Installed plugin: ctx
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> | Use this plugin:
</span></span><span style="display:flex;"><span> |      kubectl ctx
</span></span><span style="display:flex;"><span> | Documentation:
</span></span><span style="display:flex;"><span> |      https://github.com/ahmetb/kubectx
</span></span><span style="display:flex;"><span> | Caveats:
</span></span><span style="display:flex;"><span> | <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span> |  | If fzf is installed on your machine, you can interactively choose
</span></span><span style="display:flex;"><span> |  | between the entries using the arrow keys, or by fuzzy searching
</span></span><span style="display:flex;"><span> |  | as you type.
</span></span><span style="display:flex;"><span> |  | See https://github.com/ahmetb/kubectx <span style="color:#66d9ef">for</span> customization and details.
</span></span><span style="display:flex;"><span> | /
</span></span><span style="display:flex;"><span>/
</span></span><span style="display:flex;"><span>WARNING: You installed plugin <span style="color:#e6db74">&#34;ctx&#34;</span> from the krew-index plugin repository.
</span></span><span style="display:flex;"><span>   These plugins are not audited <span style="color:#66d9ef">for</span> security by the Krew maintainers.
</span></span><span style="display:flex;"><span>   Run them at your own risk.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># プラグインの実行</span>
</span></span><span style="display:flex;"><span>% kubectl ctx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># プラグインの更新</span>
</span></span><span style="display:flex;"><span>% kubectl krew upgrade
</span></span><span style="display:flex;"><span>Updated the local copy of plugin index.
</span></span><span style="display:flex;"><span>Upgrading plugin: ctx
</span></span><span style="display:flex;"><span>Skipping plugin ctx, it is already on the newest version
</span></span><span style="display:flex;"><span>Upgrading plugin: krew
</span></span><span style="display:flex;"><span>Skipping plugin krew, it is already on the newest version
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># プラグインのアンインストール</span>
</span></span><span style="display:flex;"><span>% kubectl krew uninstall ctx
</span></span></code></pre></div><h2 ref="参考" >参考</h2><a class="anchor" id="参考"></a>
<ul>
<li><a href="https://krew.sigs.k8s.io/docs/">公式ドキュメント</a></li>
<li><a href="https://qiita.com/superbrothers/items/b4a0aab0575ca6d65739">kubectl のプラグイン機能 kubectl plugin を使おう！</a></li>
<li><a href="https://techblog.yahoo.co.jp/entry/2020081830014718/">kubectlのプラグイン機構とおすすめプラグインのご紹介</a></li>
<li><a href="https://qiita.com/superbrothers/items/f2fb422b70ab6f61e531">Krew のカスタムプラグインインデックスで kubectl プラグインを配布しよう</a></li>
</ul>
		</div>






	
	

      </section>

      
      
    </article>
    
    
    <footer>
      

		
	
			
		
	    	
	  	
	
    </footer>
    



  </body>
</html>
